import os
import base64
import time
import secrets
import hashlib
import subprocess
import requests

# ==========================================
# PART 1: EXTRACT FILES
# ==========================================
FILES = {
    ".env.example": "IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgR1JBWUxPRyBDT05GSUdVUkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEdyYXlsb2cgUGFzc3dvcmQgU2VjcmV0IChtdXN0IGJlIGF0IGxlYXN0IDE2IGNoYXJzKQpHUkFZTE9HX1BBU1NXT1JEX1NFQ1JFVD1HZW5lcmF0ZV9BdF9MZWFzdF8xNl9DaGFyc19SYW5kb21fU3RyaW5nCgojIEdyYXlsb2cgUm9vdCBQYXNzd29yZCBTSEEyNTYKIyBHZW5lcmF0ZSB2aWE6IGVjaG8gLW4geW91cnBhc3N3b3JkIHwgc2hhMjU2c3VtCkdSQVlMT0dfUk9PVF9QQVNTV09SRF9TSEEyPVJFUExBQ0VfV0lUSF9TSEEyNTZfT0ZfWU9VUl9QQVNTV09SRAoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgR1JBRkFOQSBDT05GSUdVUkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpHUkFGQU5BX0FETUlOX1BBU1NXT1JEPWFkbWluCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBWRVJTSU9OSU5HIChDaGFuZ2UgaWYgbmVlZGVkKQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KVEhFSElWRV9WRVJTSU9OPTQuMS4yNC0xCkNPUlRFWF9WRVJTSU9OPTMuMS43LTEKRUxBU1RJQ1NFQVJDSF9WRVJTSU9OPTcuMTAuMgpDQVNTQU5EUkFfVkVSU0lPTj0zLjExLjE2CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBTRUNVUklUWSAmIEFQSSBLRVlTCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFRoZUhpdmUgJiBDb3J0ZXggU2VjdXJpdHkgU2VjcmV0cyAoUmFuZG9tIHN0cmluZ3MpClRIRUhJVkVfU0VDUkVUPVJlcGxhY2VfV2l0aF9BX0xvbmdfUmFuZG9tX1N0cmluZ18xCkNPUlRFWF9TRUNSRVQ9UmVwbGFjZV9XaXRoX0FfTG9uZ19SYW5kb21fU3RyaW5nXzIKCiMgQ29ydGV4IEFQSSBLZXkgKENyZWF0ZSBpbiBDb3J0ZXggVUkgYW5kIHBhc3RlIGhlcmUgZm9yIFRoZUhpdmUgaW50ZWdyYXRpb24pCkNPUlRFWF9BUElfS0VZPVBBU1RFX0NPUlRFWF9BUElfS0VZX0hFUkUKCiMgVGhlSGl2ZSBBUEkgS2V5IGZvciBTT0MtQUkgU2VydmljZQpUSEVISVZFX0FQSV9LRVk9UEFTVEVfVEhFSElWRV9BUElfS0VZX0hFUkUKCiMgQWxpZW5WYXVsdCBPVFggQVBJIEtleSAoT3B0aW9uYWwsIGZvciBJT0MgZW5yaWNobWVudCkKQUxJRU5WQVVMVF9PVFhfS0VZPVBBU1RFX09UWF9LRVlfSEVSRQo=",
    "README.md": "IyDwn5uh77iPIFNPQy1MYWI6IEFJLVBvd2VyZWQgU2VjdXJpdHkgT3BlcmF0aW9ucyBDZW50ZXIKCkEgY29tcHJlaGVuc2l2ZSwgbG9jYWwtZmlyc3QgU2VjdXJpdHkgT3BlcmF0aW9ucyBDZW50ZXIgKFNPQykgc3RhY2sgYnVpbHQgd2l0aCBEb2NrZXIuIFRoaXMgbGFiIGZlYXR1cmVzIGEgKipKdW5pb3IgQUkgU09DIEFuYWx5c3QqKiBwb3dlcmVkIGJ5IGEgbG9jYWwgTExNIHRvIGFuYWx5emUgbG9ncyBhbmQgYXV0b21hdGUgaW5jaWRlbnQgcmVzcG9uc2UuCgohW1NPQyBEYXNoYm9hcmQgTGF5b3V0XShodHRwczovL2ltZy5zaGllbGRzLmlvL2JhZGdlL1N0YXR1cy1PcGVyYXRpb25hbC1zdWNjZXNzP3N0eWxlPWZvci10aGUtYmFkZ2UpCiFbQUkgUG93ZXJlZF0oaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9BSS1PbGxhbWEtLUludGVncmF0ZWQtYmx1ZXZpYnJhbnQ/c3R5bGU9Zm9yLXRoZS1iYWRnZSkKCi0tLQoKIyMg8J+Pl++4jyBBcmNoaXRlY3R1cmUgT3ZlcnZpZXcKClRoaXMgc3RhY2sgaW50ZWdyYXRlcyBpbmR1c3RyeS1zdGFuZGFyZCB0b29scyBpbnRvIGEgdW5pZmllZCBzZWN1cml0eSBwaXBlbGluZToKCi0gKipMb2cgTWFuYWdlbWVudCoqOiBbR3JheWxvZ10oaHR0cHM6Ly93d3cuZ3JheWxvZy5vcmcvKSAod2l0aCBNb25nb0RCICYgRWxhc3RpY3NlYXJjaCkKLSAqKkluY2lkZW50IFJlc3BvbnNlKio6IFtUaGVIaXZlXShodHRwczovL3RoZWhpdmUtcHJvamVjdC5vcmcvKSAod2l0aCBDYXNzYW5kcmEpCi0gKipBbmFseXNpcyAmIEVucmljaG1lbnQqKjogW0NvcnRleF0oaHR0cHM6Ly9naXRodWIuY29tL1RoZUhpdmUtUHJvamVjdC9Db3J0ZXgpCi0gKipWaXN1YWxpemF0aW9uKio6IFtHcmFmYW5hXShodHRwczovL2dyYWZhbmEuY29tLykKLSAqKkFJIEJyYWluKio6IFtPbGxhbWFdKGh0dHBzOi8vb2xsYW1hLmNvbS8pIChMb2NhbCBMTE0gdmlhIGBxd2VuMi41OjEuNWJgKQotICoqU2luZ2xlIFBhbmUgb2YgR2xhc3MqKjogQ3VzdG9tIFNPQy1Db21tYW5kIERhc2hib2FyZAoKIyMjIFRoZSBEYXRhIEZsb3cKYGBgbWVybWFpZApncmFwaCBURAogICAgQVtSZW1vdGUgU2VydmVycyAvIExvY2FsIExvZ3NdIC0tPnxTeXNsb2cvR0VMRnwgQihHcmF5bG9nKQogICAgQiAtLT58SW5kZXh8IEMoRWxhc3RpY3NlYXJjaCkKICAgIEIgLS0+fEFuYWx5emV8IERbU09DLUFJIEFuYWx5c3RdCiAgICBEIC0tPnxRdWVyeXwgRVtPbGxhbWEgTExNXQogICAgRCAtLT58Q3JlYXRlIEFsZXJ0c3wgRihUaGVIaXZlKQogICAgRiAtLT58RW5yaWNofCBHKENvcnRleCkKICAgIEhbR3JhZmFuYV0gLS0+fFZpc3VhbGl6ZXwgQwogICAgSVtTT0MgRGFzaGJvYXJkXSAtLT58TW9uaXRvcnwgRCAmIEIgJiBGCmBgYAoKLS0tCgojIyDinKggS2V5IEZlYXR1cmVzCgojIyMg8J+kliBKdW5pb3IgQUkgU09DIEFuYWx5c3QKQSBjdXN0b20gUHl0aG9uIHNlcnZpY2UgdGhhdCBtb25pdG9ycyB5b3VyIEdyYXlsb2cgZmVlZCBpbiByZWFsLXRpbWUuCi0gKipBdXRvbWF0ZWQgQW5hbHlzaXMqKjogU2VuZHMgaGlnaC1pbnRlcmVzdCBsb2dzIHRvIGEgbG9jYWwgTExNIChPbGxhbWEpIGZvciByZWFzb25pbmcuCi0gKipTZXZlcml0eSBTY29yaW5nKio6IENhdGVnb3JpemVzIGV2ZW50cyBhbmQgcHJvdmlkZXMgYSAiQW5hbHlzdCBWZXJkaWN0LiIKLSAqKkF1dG8tRXNjYWxhdGlvbioqOiBBdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYWxlcnRzIGluICoqVGhlSGl2ZSoqIGZvciBISUdIL0NSSVRJQ0FMIGZpbmRpbmdzLgotICoqMTAwJSBMb2NhbCoqOiBObyBzZWN1cml0eSBkYXRhIGV2ZXIgbGVhdmVzIHlvdXIgbWFjaGluZS4KCiMjIyDwn5al77iPIFNPQyBDb21tYW5kIERhc2hib2FyZApBIGN1c3RvbS1idWlsdCAiU2luZ2xlIFBhbmUgb2YgR2xhc3MiIHRvIG1vbml0b3IgeW91ciBlbnRpcmUgbGFiIGZyb20gb25lIHNjcmVlbjoKLSAqKkxpdmUgQUkgRmVlZCoqOiBSZWFsLXRpbWUgc3RyZWFtIG9mIHdoYXQgdGhlIEFJIGlzIGFuYWx5emluZy4KLSAqKlNlcnZpY2UgSGVhbHRoKio6IEluc3RhbnQgc3RhdHVzIG9mIEdyYXlsb2csIFRoZUhpdmUsIGFuZCBFbGFzdGljc2VhcmNoLgotICoqUXVpY2stQWNjZXNzKio6IERpcmVjdCBsaW5rcyB0byBhbGwgdG9vbCBVSXMuCgotLS0KCiMjIPCfmoAgUXVpY2sgU3RhcnQKCiMjIyAxLiBQcmVyZXF1aXNpdGVzCi0gRG9ja2VyICYgRG9ja2VyIENvbXBvc2UgVjIKLSBXU0wyIChpZiBvbiBXaW5kb3dzKQotIDE2R0IrIFJBTSByZWNvbW1lbmRlZCAoZm9yIExMTSBpbmZlcmVuY2UpCgojIyMgMi4gU2V0dXAgQ29uZmlndXJhdGlvbgpDbG9uZSB0aGUgcmVwbyBhbmQgY3JlYXRlIHlvdXIgYC5lbnZgIGZpbGU6CmBgYGJhc2gKY3AgLmVudi5leGFtcGxlIC5lbnYgICMgT3IgdXNlIHRoZSBwcm92aWRlZCAuZW52IHN0cnVjdHVyZQpgYGAKRW5zdXJlIHlvdSBzZXQgc3Ryb25nIHBhc3N3b3JkcyBhbmQgeW91ciAqKlRoZUhpdmUgQVBJIEtleSoqLgoKIyMjIDMuIERlcGxveQpgYGBiYXNoCmRvY2tlciBjb21wb3NlIHVwIC1kIC0tYnVpbGQKYGBgCgojIyMgNC4gQWNjZXNzIHRoZSBTdGFjawotICoqU09DIERhc2hib2FyZCoqOiBgaHR0cDovL2xvY2FsaG9zdDo4MDgwYAotICoqR3JheWxvZyoqOiBgaHR0cDovL2xvY2FsaG9zdDo5MDAwYCAoYWRtaW4vYWRtaW4pCi0gKipUaGVIaXZlKio6IGBodHRwOi8vbG9jYWxob3N0OjkwMDFgCi0gKipHcmFmYW5hKio6IGBodHRwOi8vbG9jYWxob3N0OjMwMDBgCi0gKipDb3J0ZXgqKjogYGh0dHA6Ly9sb2NhbGhvc3Q6OTAwMmAKCi0tLQoKIyMg8J+UkSBNYW5kYXRvcnkgU2V0dXAgKFBvc3QtRGVwbG95bWVudCkKClRvIGxpbmsgdGhlIHNlcnZpY2VzIHRvZ2V0aGVyLCB5b3UgbXVzdCBnZW5lcmF0ZSBBUEkga2V5czoKCiMjIyAxLiBDb25maWd1cmUgR3JheWxvZyBJbnB1dCAoRm9yIExvZyBJbmdlc3Rpb24pCjEuIEdvIHRvICoqR3JheWxvZyoqIChbaHR0cDovL2xvY2FsaG9zdDo5MDAwXShodHRwOi8vbG9jYWxob3N0OjkwMDApKS4KMi4gTG9naW4gd2l0aCBgYWRtaW5gIC8gYGFkbWluYC4KMy4gTmF2aWRhdGUgdG8gKipTeXN0ZW0qKiDihpIgKipJbnB1dHMqKi4KNC4gU2VsZWN0ICoqU3lzbG9nIFVEUCoqIGZyb20gdGhlIGRyb3Bkb3duIGFuZCBjbGljayAqKkxhdW5jaCBuZXcgaW5wdXQqKi4KNS4gU2V0OgogICAtICoqVGl0bGUqKjogYFN5c2xvZyBVRFBgCiAgIC0gKipQb3J0Kio6IGAxNTE0YAogICAtICoqQmluZCBhZGRyZXNzKio6IGAwLjAuMC4wYAo2LiBDbGljayAqKlNhdmUqKi4KCiMjIyAyLiBHZXQgQ29ydGV4IEFQSSBLZXkgKEZvciBUaGVIaXZlKQoxLiBHbyB0byAqKkNvcnRleCoqIChbaHR0cDovL2xvY2FsaG9zdDo5MDAyXShodHRwOi8vbG9jYWxob3N0OjkwMDIpKS4KMi4gQ3JlYXRlIGFuIGluaXRpYWwgYWRtaW4gYWNjb3VudC4KMy4gR28gdG8gKipPcmdhbml6YXRpb24qKiDihpIgKipVc2VycyoqIOKGkiBDbGljayB5b3VyICoqVXNlciBOYW1lKiogKGUuZy4sIGFkbWluKS4KNC4gQ2xpY2sgKipDcmVhdGUgQVBJIEtleSoqLCBjb3B5IGl0LCBhbmQgcGFzdGUgaXQgaW50byBgLmVudmAgYXMgYENPUlRFWF9BUElfS0VZYC4KCiMjIyAzLiBHZXQgVGhlSGl2ZSBBUEkgS2V5IChGb3IgU09DLUFJKQoxLiBHbyB0byAqKlRoZUhpdmUqKiAoW2h0dHA6Ly9sb2NhbGhvc3Q6OTAwMV0oaHR0cDovL2xvY2FsaG9zdDo5MDAxKSkuCjIuIENyZWF0ZSBhbiBPcmdhbml6YXRpb24gKGUuZy4sIGBTT0NgKSBhbmQgYSBVc2VyLgozLiBFbnN1cmUgdGhlIHVzZXIgaGFzIHRoZSAqKmBhbmFseXN0YCoqIG9yICoqYGFkbWluYCoqIHByb2ZpbGUgd2l0aGluIHRoZSBvcmdhbml6YXRpb24uCjQuIENsaWNrIG9uIHRoZSAqKlVzZXIgUHJvZmlsZSoqIOKGkiAqKkFQSSBLZXkqKiDihpIgKipSZXZlYWwvQ3JlYXRlKiouCjUuIFBhc3RlIGl0IGludG8gYC5lbnZgIGFzIGBUSEVISVZFX0FQSV9LRVlgLgoKIyMjIDQuIEFwcGx5IENoYW5nZXMKQWZ0ZXIgdXBkYXRpbmcgYC5lbnZgLCBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgc3BlY2lmaWMgc2VydmljZSB0byBhdm9pZCByZWNyZWF0aW5nIHRoZSBlbnRpcmUgc3RhY2s6CgpgYGBiYXNoCiMgUmVjb21tZW5kZWQ6IFVwZGF0ZSBvbmx5IHRoZSBzZXJ2aWNlIHRoYXQgY2hhbmdlZApkb2NrZXIgY29tcG9zZSB1cCAtZCBzb2MtYWkKCiMgSWYgeW91IG5lZWQgdG8gcmVidWlsZCB0aGUgQUkncyBQeXRob24gZW52aXJvbm1lbnQ6CmRvY2tlciBjb21wb3NlIHVwIC1kIC0tYnVpbGQgc29jLWFpCgojIFRvIHVwZGF0ZSBUaGVIaXZlIGNvbmZpZ3VyYXRpb24gKGFmdGVyIGFkZGluZyBDb3J0ZXggQVBJIGtleSk6CmRvY2tlciBjb21wb3NlIHVwIC1kIHRoZWhpdmUKYGBgCgo+IFshVElQXQo+IFJ1bm5pbmcgYGRvY2tlciBjb21wb3NlIHVwIC1kYCAod2l0aG91dCBhIHNlcnZpY2UgbmFtZSkgYWZ0ZXIgY2hhbmdpbmcgYW55IHZhcmlhYmxlIGluIGAuZW52YCB3aWxsIGV2YWx1YXRlIHRoZSBlbnRpcmUgc3RhY2sgYW5kIG1heSByZWNyZWF0ZSBjb250YWluZXJzIGxpa2UgVGhlSGl2ZSBldmVuIGlmIHRoZXkgZG9uJ3Qgc2VlbSB0byBoYXZlIGNoYW5nZWQuIEFsd2F5cyB0YXJnZXQgdGhlIHNwZWNpZmljIHNlcnZpY2Ugd2hlbiBwb3NzaWJsZS4KCi0tLQoKIyMg8J+nqiBTaW11bGF0ZWQgQXR0YWNrIFRlc3RpbmcKT25jZSB0aGUgc3RhY2sgaXMgcnVubmluZywgeW91IGNhbiB0ZXN0IHRoZSBBSSBkZXRlY3Rpb24gYnkgc2VuZGluZyBhIG1hbGljaW91cyBsb2c6CgpgYGBiYXNoCmVjaG8gJzwxPltTT0MtTEFCXSBBTEVSVDogU1FMIEluamVjdGlvbiBkZXRlY3RlZCBmcm9tIDE5Mi4xNjguMS4xMDAnIHwgbmMgLXUgLXcxIDEyNy4wLjAuMSAxNTE0CmBgYApXYXRjaCB0aGUgKipTT0MgRGFzaGJvYXJkKiogdG8gc2VlIHRoZSBBSSBhbmFseXplIHRoZSB0aHJlYXQhCgotLS0KCiMjIPCflJIgU2VjdXJpdHkgTm90ZQpUaGlzIGxhYiBpcyBmb3IgKiplZHVjYXRpb25hbCBwdXJwb3NlcyBvbmx5KiouIFdoaWxlIHRoZSBMTE0gaW5mZXJlbmNlIGlzIGxvY2FsLCB0aGUgc2VydmljZXMgYXJlIGNvbmZpZ3VyZWQgaW4gYSAibGFiIG1vZGUiIChlLmcuLCBFbGFzdGljc2VhcmNoIHBvcnQgOTIwMCBpcyBleHBvc2VkKS4gRG8gbm90IGRlcGxveSB0aGlzIGFzLWlzIGluIGEgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCB3aXRob3V0IGZ1cnRoZXIgaGFyZGVuaW5nLgoKLS0tCgojIyBUcm91Ymxlc2hvb3RpbmcKCjEuIHRoZWhpdmUgdHNob290CiAgIGBgYGJhc2gKICAgZG9ja2VyIGNvbXBvc2Ugc3RvcCB0aGVoaXZlCiAgIGRvY2tlciB2b2x1bWUgcm0gaG9tZXNlY19jYXNzYW5kcmFfZGF0YSBob21lc2VjX3RoZWhpdmVfZGF0YQogICBkb2NrZXIgY29tcG9zZSB1cCAtZAogICBgYGAKMi4gQ29ydGV4IHRzaG9vdAogICBgYGBiYXNoCiAgIGRvY2tlciBjb21wb3NlIHN0b3AgY29ydGV4CiAgIGN1cmwgLVggREVMRVRFICJodHRwOi8vbG9jYWxob3N0OjkyMDAvY29ydGV4XyoiCiAgIGRvY2tlciBjb21wb3NlIHVwIC1kCiAgIGBgYAoKLS0tCgoqQ3JlYXRlZCB1c2luZyBBbnRpZ3Jhdml0eSBBSS4qCg==",
    "cortex/application.conf": "IyMgQ29ydGV4IENvbmZpZ3VyYXRpb24KCiMgU2VjcmV0IEtleQpwbGF5Lmh0dHAuc2VjcmV0LmtleT0kez9DT1JURVhfU0VDUkVUfQoKIyBFbGFzdGljc2VhcmNoCnNlYXJjaCB7CiAgaW5kZXggPSAiY29ydGV4IgogIHVyaSA9ICJodHRwOi8vZWxhc3RpY3NlYXJjaC1zb2M6OTIwMCIKfQoKIyBIVFRQIEJpbmRpbmcKaHR0cCB7CiAgcG9ydCA9IDkwMDAKfQoKIyBBdXRoCmF1dGggewogICMgRGVmYXVsdCBhZG1pbiB1c2VyIGNyZWF0aW9uIGlzIGRvbmUgb24gZmlyc3QgbG9naW4KfQoKIyBBbmFseXplciAmIFJlc3BvbmRlciBjYXRhbG9ncwphbmFseXplciB7CiAgdXJscyA9IFsKICAgICJodHRwczovL2Rvd25sb2FkLnRoZWhpdmUtcHJvamVjdC5vcmcvYW5hbHl6ZXJzLmpzb24iCiAgXQp9CgpyZXNwb25kZXIgewogIHVybHMgPSBbCiAgICAiaHR0cHM6Ly9kb3dubG9hZC50aGVoaXZlLXByb2plY3Qub3JnL3Jlc3BvbmRlcnMuanNvbiIKICBdCn0K",
    "dashboard/app.js": "Y29uc3QgU09DX0FJX0FQSSA9ICdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL2hpc3RvcnknOwpjb25zdCBTT0NfUkVQT1JUU19BUEkgPSAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS9yZXBvcnRzJzsKY29uc3QgR1JBWUxPR19BUEkgPSAnaHR0cDovL2xvY2FsaG9zdDo5MDAwL2FwaSc7CmNvbnN0IFRIRUhJVkVfQVBJID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6OTAwMS9hcGknOwoKLy8gU3RhdGUKbGV0IGxhc3RIaXN0b3J5ID0gW107CmxldCBsYXN0UmVwb3J0cyA9IFtdOwpjb25zdCBzdGF0dXNJdGVtcyA9IHsKICAgIGdyYXlsb2c6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMtZ3JheWxvZycpLAogICAgdGhlaGl2ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cy10aGVoaXZlJyksCiAgICBpbmRleGVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLWluZGV4ZXInKSwKICAgIGFpOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLWFpJykKfTsKCmNvbnN0IHN0cmVhbUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1zdHJlYW0nKTsKY29uc3QgcmVwb3J0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1saXN0Jyk7CmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1tb2RhbCcpOwpjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtcmVwb3J0LWJvZHknKTsKY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjbG9zZS1tb2RhbCcpWzBdOwoKLy8gRmV0Y2ggQUkgSGlzdG9yeQphc3luYyBmdW5jdGlvbiBmZXRjaEFJSGlzdG9yeSgpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChTT0NfQUlfQVBJKTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIHNldFN0YXR1cygnYWknLCB0cnVlKTsKICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZGF0YSkgIT09IEpTT04uc3RyaW5naWZ5KGxhc3RIaXN0b3J5KSkgewogICAgICAgICAgICB1cGRhdGVTdHJlYW0oZGF0YSk7CiAgICAgICAgICAgIGxhc3RIaXN0b3J5ID0gZGF0YTsKICAgICAgICB9CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHNldFN0YXR1cygnYWknLCBmYWxzZSk7CiAgICB9Cn0KCi8vIEZldGNoIFJlcG9ydHMKYXN5bmMgZnVuY3Rpb24gZmV0Y2hSZXBvcnRzKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFNPQ19SRVBPUlRTX0FQSSk7CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZGF0YSkgIT09IEpTT04uc3RyaW5naWZ5KGxhc3RSZXBvcnRzKSkgewogICAgICAgICAgICB1cGRhdGVSZXBvcnRzKGRhdGEpOwogICAgICAgICAgICBsYXN0UmVwb3J0cyA9IGRhdGE7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZXBvcnRzOicsIGVycm9yKTsKICAgIH0KfQoKZnVuY3Rpb24gdXBkYXRlUmVwb3J0cyhyZXBvcnRzKSB7CiAgICBpZiAocmVwb3J0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXBvcnRDb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxvYWRpbmctc3RhdGUiPkF3YWl0aW5nIGNhc2UgY2xvc3VyZXMuLi48L2Rpdj4nOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICByZXBvcnRDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICByZXBvcnRzLmZvckVhY2gocmVwb3J0ID0+IHsKICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3JlcG9ydC1pdGVtJzsKICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUocmVwb3J0LnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoKTsKCiAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVwb3J0LXRpdGxlIj4ke3JlcG9ydC50aXRsZX08L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVwb3J0LW1ldGEiPiR7dGltZX08L2Rpdj4KICAgICAgICBgOwoKICAgICAgICBkaXYub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgbW9kYWxCb2R5LmlubmVySFRNTCA9IGZvcm1hdE1hcmtkb3duKHJlcG9ydC5yZXBvcnQpOwogICAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9OwoKICAgICAgICByZXBvcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTsKICAgIH0pOwp9CgovLyBWZXJ5IGJhc2ljIG1hcmtkb3duIGZvcm1hdHRlciBmb3IgcmVwb3J0cwpmdW5jdGlvbiBmb3JtYXRNYXJrZG93bih0ZXh0KSB7CiAgICByZXR1cm4gdGV4dAogICAgICAgIC5yZXBsYWNlKC9eIyMgKC4qJCkvZ2ltLCAnPGgyPiQxPC9oMj4nKQogICAgICAgIC5yZXBsYWNlKC9eIyMjICguKiQpL2dpbSwgJzxoMz4kMTwvaDM+JykKICAgICAgICAucmVwbGFjZSgvXCpcKiguKilcKlwqL2dpbSwgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKQogICAgICAgIC5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOwp9CgovLyBNb2RhbCBoYW5kbGluZwpjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKd2luZG93Lm9uY2xpY2sgPSAoZXZlbnQpID0+IHsKICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7Cn07CgovLyBFeGlzdGluZyBsb2dpYy4uLgpmdW5jdGlvbiBzZXRTdGF0dXMoaWQsIGlzT25saW5lKSB7CiAgICBjb25zdCBlbCA9IHN0YXR1c0l0ZW1zW2lkXTsKICAgIGlmICghZWwpIHJldHVybjsKICAgIGlmIChpc09ubGluZSkgewogICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ29ubGluZScpOwogICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ29mZmxpbmUnKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnb2ZmbGluZScpOwogICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ29ubGluZScpOwogICAgfQp9CgpmdW5jdGlvbiB1cGRhdGVTdHJlYW0oaXRlbXMpIHsKICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgICBzdHJlYW1Db250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxvYWRpbmctc3RhdGUiPkF3YWl0aW5nIGZpcnN0IGxvZ3MgZm9yIGFuYWx5c2lzLi4uPC9kaXY+JzsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBzdHJlYW1Db250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGRpdi5jbGFzc05hbWUgPSAnc3RyZWFtLWl0ZW0nOwogICAgICAgIGxldCBzZXZlcml0eSA9ICdMT1cnOwogICAgICAgIGlmIChpdGVtLmFuYWx5c2lzLmluY2x1ZGVzKCdISUdIJykpIHNldmVyaXR5ID0gJ0hJR0gnOwogICAgICAgIGVsc2UgaWYgKGl0ZW0uYW5hbHlzaXMuaW5jbHVkZXMoJ01FRElVTScpKSBzZXZlcml0eSA9ICdNRURJVU0nOwogICAgICAgIGVsc2UgaWYgKGl0ZW0uYW5hbHlzaXMuaW5jbHVkZXMoJ0NSSVRJQ0FMJykpIHNldmVyaXR5ID0gJ0hJR0gnOwogICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGBzZXZlcml0eS0ke3NldmVyaXR5fWApOwogICAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShpdGVtLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CgogICAgICAgIGxldCBpb2NIdG1sID0gJyc7CiAgICAgICAgaWYgKGl0ZW0uaW9jcykgewogICAgICAgICAgICBjb25zdCBpb2NMaXN0ID0gW107CiAgICAgICAgICAgIGlmIChpdGVtLmlvY3MuaXApIGl0ZW0uaW9jcy5pcC5mb3JFYWNoKGlwID0+IGlvY0xpc3QucHVzaChgPHNwYW4gY2xhc3M9ImlvYy1iYWRnZSBpb2MtaXAiPiR7aXB9PC9zcGFuPmApKTsKICAgICAgICAgICAgaWYgKGl0ZW0uaW9jcy5kb21haW4pIGl0ZW0uaW9jcy5kb21haW4uZm9yRWFjaChkID0+IGlvY0xpc3QucHVzaChgPHNwYW4gY2xhc3M9ImlvYy1iYWRnZSBpb2MtZG9tYWluIj4ke2R9PC9zcGFuPmApKTsKICAgICAgICAgICAgaWYgKGl0ZW0uaW9jcy5oYXNoKSBpdGVtLmlvY3MuaGFzaC5mb3JFYWNoKGggPT4gaW9jTGlzdC5wdXNoKGA8c3BhbiBjbGFzcz0iaW9jLWJhZGdlIGlvYy1oYXNoIj4ke2h9PC9zcGFuPmApKTsKCiAgICAgICAgICAgIGlmIChpb2NMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGlvY0h0bWwgPSBgPGRpdiBjbGFzcz0iaXRlbS1pb2NzIj4ke2lvY0xpc3Quam9pbignJyl9PC9kaXY+YDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iaXRlbS1oZWFkZXIiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Iml0ZW0tc291cmNlIj4ke2l0ZW0uc291cmNlfTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtLXRpbWUiPiR7dGltZX08L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpdGVtLWxvZyI+JHtpdGVtLmxvZ308L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaXRlbS1hbmFseXNpcyI+JHtpdGVtLmFuYWx5c2lzfTwvZGl2PgogICAgICAgICAgICAke2lvY0h0bWx9CiAgICAgICAgYDsKICAgICAgICBzdHJlYW1Db250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTsKICAgIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBjaGVja0hlYWx0aCgpIHsKICAgIHRyeSB7IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjkwMDAnLCB7IG1vZGU6ICduby1jb3JzJyB9KTsgc2V0U3RhdHVzKCdncmF5bG9nJywgdHJ1ZSk7IH0gY2F0Y2ggKGUpIHsgc2V0U3RhdHVzKCdncmF5bG9nJywgZmFsc2UpOyB9CiAgICB0cnkgeyBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo5MDAxJywgeyBtb2RlOiAnbm8tY29ycycgfSk7IHNldFN0YXR1cygndGhlaGl2ZScsIHRydWUpOyB9IGNhdGNoIChlKSB7IHNldFN0YXR1cygndGhlaGl2ZScsIGZhbHNlKTsgfQogICAgdHJ5IHsgYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6OTIwMCcsIHsgbW9kZTogJ25vLWNvcnMnIH0pOyBzZXRTdGF0dXMoJ2luZGV4ZXInLCB0cnVlKTsgfSBjYXRjaCAoZSkgeyBzZXRTdGF0dXMoJ2luZGV4ZXInLCBmYWxzZSk7IH0KfQoKY2hlY2tIZWFsdGgoKTsKZmV0Y2hBSUhpc3RvcnkoKTsKZmV0Y2hSZXBvcnRzKCk7CnNldEludGVydmFsKGNoZWNrSGVhbHRoLCA1MDAwKTsKc2V0SW50ZXJ2YWwoZmV0Y2hBSUhpc3RvcnksIDMwMDApOwpzZXRJbnRlcnZhbChmZXRjaFJlcG9ydHMsIDEwMDAwKTsK",
    "dashboard/index.html": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U09DIHwgU2luZ2xlIFBhbmUgb2YgR2xhc3M8L3RpdGxlPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJzdHlsZS5jc3MiPgogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tIj4KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRAMzAwOzQwMDs2MDA7NzAwJmZhbWlseT1KZXRCcmFpbnMrTW9ubzp3Z2h0QDQwMDs1MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iYmFja2dyb3VuZC1ibG9icyI+CiAgICAgICAgPGRpdiBjbGFzcz0iYmxvYiBibG9iLTEiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImJsb2IgYmxvYi0yIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJibG9iIGJsb2ItMyI+PC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtY29udGFpbmVyIj4KICAgICAgICA8aGVhZGVyPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsb2dvLWFyZWEiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2Nhbm5lci1saW5lIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxoMT5TT0M8c3Bhbj5DT01NQU5EPC9zcGFuPjwvaDE+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWRnZSI+SlVOSU9SLUFJLU9QRVJBVElPTkFMPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzeXN0ZW0tc3RhdHVzIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXR1cy1pdGVtIiBpZD0ic3RhdHVzLWdyYXlsb2ciPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJkb3QiPjwvc3Bhbj4gR3JheWxvZwogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0dXMtaXRlbSIgaWQ9InN0YXR1cy10aGVoaXZlIj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZG90Ij48L3NwYW4+IFRoZUhpdmUKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHVzLWl0ZW0iIGlkPSJzdGF0dXMtaW5kZXhlciI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImRvdCI+PC9zcGFuPiBJbmRleGVyCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXR1cy1pdGVtIiBpZD0ic3RhdHVzLWFpIj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZG90Ij48L3NwYW4+IEFJLUFuYWx5c3QKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2hlYWRlcj4KCiAgICAgICAgPG1haW4+CiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzPSJsZWZ0LXBhbmVsIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgZ2xhc3MgbGluay1jYXJkIj4KICAgICAgICAgICAgICAgICAgICA8aDI+T3BlcmF0aW9uIENlbnRlcjwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGluay1ncmlkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo5MDAwIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImJ0bi1saW5rIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7wn5SNPC9zcGFuPiBHcmF5bG9nCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo5MDAxIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImJ0bi1saW5rIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7wn5CdPC9zcGFuPiBUaGVIaXZlCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDozMDAwIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImJ0bi1saW5rIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7wn5OKPC9zcGFuPiBHcmFmYW5hCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo5MDAyIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImJ0bi1saW5rIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7wn6egPC9zcGFuPiBDb3J0ZXgKICAgICAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCBnbGFzcyBzdGF0cy1jYXJkIj4KICAgICAgICAgICAgICAgICAgICA8aDI+RW52aXJvbm1lbnQgTWV0cmljczwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5Ub3RhbCBMb2dzIChJbmRleGVkKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImxvZy1jb3VudCIgY2xhc3M9InN0YXQtdmFsIj4tLS08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5BY3RpdmUgQWxlcnRzPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWxlcnQtY291bnQiIGNsYXNzPSJzdGF0LXZhbCI+LS0tPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvc2VjdGlvbj4KCiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzPSJjZW50ZXItcGFuZWwiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCBnbGFzcyBzdHJlYW0tY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDI+SnVuaW9yIEFJIEFuYWx5c3QgU3RyZWFtPC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxpdmUtaW5kaWNhdG9yIj7il48gTElWRSBGRUVEPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFpLXN0cmVhbSIgY2xhc3M9InN0cmVhbS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFN0cmVhbSBpdGVtcyB3aWxsIGJlIGluamVjdGVkIGhlcmUgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxvYWRpbmctc3RhdGUiPkluaXRpYWxpc2luZyBBSSBDb3JlLi4uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgZ2xhc3MgcmVwb3J0cy1jYXJkIj4KICAgICAgICAgICAgICAgICAgICA8aDI+UG9zdC1JbmNpZGVudCBSZXBvcnRzPC9oMj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZXBvcnQtbGlzdCIgY2xhc3M9InJlcG9ydC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsb2FkaW5nLXN0YXRlIj5Bd2FpdGluZyBjYXNlIGNsb3N1cmVzLi4uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9zZWN0aW9uPgogICAgICAgIDwvbWFpbj4KICAgIDwvZGl2PgoKICAgIDwhLS0gUmVwb3J0IE1vZGFsIC0tPgogICAgPGRpdiBpZD0icmVwb3J0LW1vZGFsIiBjbGFzcz0ibW9kYWwiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQgZ2xhc3MiPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iY2xvc2UtbW9kYWwiPiZ0aW1lczs8L3NwYW4+CiAgICAgICAgICAgIDxkaXYgaWQ9Im1vZGFsLXJlcG9ydC1ib2R5Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQgc3JjPSJhcHAuanMiPjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K",
    "dashboard/style.css": "OnJvb3QgewogICAgLS1iZzogIzA5MDkwYjsKICAgIC0tY2FyZDogcmdiYSgyNCwgMjQsIDI3LCAwLjQpOwogICAgLS1ib3JkZXI6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7CiAgICAtLXByaW1hcnk6ICMzYjgyZjY7CiAgICAtLXByaW1hcnktZ2xvdzogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMyk7CiAgICAtLXRleHQ6ICNmYWZhZmE7CiAgICAtLXRleHQtZGltOiAjYTFhMWFhOwogICAgLS1hY2NlbnQ6ICNlZjQ0NDQ7CiAgICAtLXN1Y2Nlc3M6ICMxMGI5ODE7CiAgICAtLXdhcm5pbmc6ICNmNTllMGI7Cn0KCiogewogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIG1hcmdpbjogMDsKICAgIHBhZGRpbmc6IDA7Cn0KCmJvZHkgewogICAgYmFja2dyb3VuZDogdmFyKC0tYmcpOwogICAgY29sb3I6IHZhcigtLXRleHQpOwogICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgICBtaW4taGVpZ2h0OiAxMDB2aDsKfQoKLyogQmFja2dyb3VuZCBBbmltYXRlZCBCbG9icyAqLwouYmFja2dyb3VuZC1ibG9icyB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB6LWluZGV4OiAtMTsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5ibG9iIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiA0MHZ3OwogICAgaGVpZ2h0OiA0MHZ3OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgZmlsdGVyOiBibHVyKDEwMHB4KTsKICAgIG9wYWNpdHk6IDAuMTU7CiAgICBhbmltYXRpb246IG1vdmUgMzBzIGluZmluaXRlIGFsdGVybmF0ZTsKfQoKLmJsb2ItMSB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTsKICAgIHRvcDogLTEwJTsKICAgIGxlZnQ6IC0xMCU7Cn0KCi5ibG9iLTIgewogICAgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50KTsKICAgIGJvdHRvbTogLTEwJTsKICAgIHJpZ2h0OiAtMTAlOwogICAgYW5pbWF0aW9uLWRlbGF5OiAtMTBzOwp9CgouYmxvYi0zIHsKICAgIGJhY2tncm91bmQ6ICM4YjVjZjY7CiAgICB0b3A6IDQwJTsKICAgIGxlZnQ6IDMwJTsKICAgIGFuaW1hdGlvbi1kZWxheTogLTIwczsKfQoKQGtleWZyYW1lcyBtb3ZlIHsKICAgIGZyb20gewogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApOwogICAgfQoKICAgIHRvIHsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgxMHZ3LCAxMHZoKTsKICAgIH0KfQoKLmRhc2hib2FyZC1jb250YWluZXIgewogICAgbWF4LXdpZHRoOiAxNjAwcHg7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIHBhZGRpbmc6IDJyZW07CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGdhcDogMnJlbTsKfQoKaGVhZGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgoubG9nby1hcmVhIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHBhZGRpbmctbGVmdDogMXJlbTsKICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0tcHJpbWFyeSk7Cn0KCi5sb2dvLWFyZWEgaDEgewogICAgZm9udC1zaXplOiAxLjVyZW07CiAgICBmb250LXdlaWdodDogNzAwOwogICAgbGV0dGVyLXNwYWNpbmc6IDJweDsKfQoKLmxvZ28tYXJlYSBoMSBzcGFuIHsKICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsKfQoKLmJhZGdlIHsKICAgIGZvbnQtc2l6ZTogMC43cmVtOwogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOwogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1nbG93KTsKICAgIHBhZGRpbmc6IDAuMnJlbSAwLjVyZW07CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBtYXJnaW4tdG9wOiAwLjRyZW07CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5zeXN0ZW0tc3RhdHVzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDEuNXJlbTsKfQoKLnN0YXR1cy1pdGVtIHsKICAgIGZvbnQtc2l6ZTogMC44NXJlbTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LWRpbSk7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGdhcDogMC41cmVtOwogICAgYmFja2dyb3VuZDogdmFyKC0tY2FyZCk7CiAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwp9Cgouc3RhdHVzLWl0ZW0gLmRvdCB7CiAgICB3aWR0aDogOHB4OwogICAgaGVpZ2h0OiA4cHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBiYWNrZ3JvdW5kOiAjNTU1Owp9Cgouc3RhdHVzLWl0ZW0ub25saW5lIC5kb3QgewogICAgYmFja2dyb3VuZDogdmFyKC0tc3VjY2Vzcyk7CiAgICBib3gtc2hhZG93OiAwIDAgMTBweCB2YXIoLS1zdWNjZXNzKTsKfQoKLnN0YXR1cy1pdGVtLm9mZmxpbmUgLmRvdCB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQpOwp9CgptYWluIHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDM1MHB4IDFmcjsKICAgIGdhcDogMnJlbTsKICAgIGZsZXg6IDE7Cn0KCi5nbGFzcyB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jYXJkKTsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgcGFkZGluZzogMS41cmVtOwp9CgouY2FyZCBoMiB7CiAgICBmb250LXNpemU6IDFyZW07CiAgICBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOwogICAgbWFyZ2luLWJvdHRvbTogMS41cmVtOwogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgIGxldHRlci1zcGFjaW5nOiAxcHg7Cn0KCi5sZWZ0LXBhbmVsIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgZ2FwOiAxLjVyZW07Cn0KCi5saW5rLWdyaWQgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgIGdhcDogMXJlbTsKfQoKLmJ0bi1saW5rIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgcGFkZGluZzogMXJlbTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wMyk7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50Owp9CgouYnRuLWxpbms6aG92ZXIgewogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1nbG93KTsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7Cn0KCi5idG4tbGluayAuaWNvbiB7CiAgICBmb250LXNpemU6IDEuNXJlbTsKICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTsKfQoKLnN0YXQtcm93IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBtYXJnaW4tYm90dG9tOiAxcmVtOwogICAgZm9udC1zaXplOiAwLjlyZW07CiAgICBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOwp9Cgouc3RhdC12YWwgewogICAgY29sb3I6IHZhcigtLXRleHQpOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGZvbnQtZmFtaWx5OiAnSmV0QnJhaW5zIE1vbm8nLCBtb25vc3BhY2U7Cn0KCi5jZW50ZXItcGFuZWwgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9Cgouc3RyZWFtLWNhcmQgewogICAgZmxleDogMTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgcGFkZGluZzogMDsKfQoKLnN0cmVhbS1jYXJkIC5jYXJkLWhlYWRlciB7CiAgICBwYWRkaW5nOiAxLjVyZW07CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgoubGl2ZS1pbmRpY2F0b3IgewogICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgYmFja2dyb3VuZDogcmdiYSgyMzksIDY4LCA2OCwgMC4xKTsKICAgIGNvbG9yOiB2YXIoLS1hY2NlbnQpOwogICAgcGFkZGluZzogMC4zcmVtIDAuNnJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGFuaW1hdGlvbjogYmxpbmsgMnMgaW5maW5pdGU7Cn0KCkBrZXlmcmFtZXMgYmxpbmsgewogICAgNTAlIHsKICAgICAgICBvcGFjaXR5OiAwLjQ7CiAgICB9Cn0KCi5zdHJlYW0tY29udGFpbmVyIHsKICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBtYXgtaGVpZ2h0OiA2MDBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgZ2FwOiAxcmVtOwp9Cgouc3RyZWFtLWl0ZW0gewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjAzKTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIHBhZGRpbmc6IDFyZW07CiAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLXByaW1hcnkpOwogICAgYW5pbWF0aW9uOiBzbGlkZUluIDAuM3MgZWFzZS1vdXQ7Cn0KCkBrZXlmcmFtZXMgc2xpZGVJbiB7CiAgICBmcm9tIHsKICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgyMHB4KTsKICAgIH0KCiAgICB0byB7CiAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7CiAgICB9Cn0KCi5zdHJlYW0taXRlbS5zZXZlcml0eS1ISUdIIHsKICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1hY2NlbnQpOwp9Cgouc3RyZWFtLWl0ZW0uc2V2ZXJpdHktTUVESVVNIHsKICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS13YXJuaW5nKTsKfQoKLnN0cmVhbS1pdGVtLnNldmVyaXR5LUxPVyB7CiAgICBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7Cn0KCi5pdGVtLWhlYWRlciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgZm9udC1zaXplOiAwLjhyZW07CiAgICBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOwogICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwp9CgouaXRlbS1zb3VyY2UgewogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsKfQoKLml0ZW0tbG9nIHsKICAgIGZvbnQtZmFtaWx5OiAnSmV0QnJhaW5zIE1vbm8nLCBtb25vc3BhY2U7CiAgICBmb250LXNpemU6IDAuODVyZW07CiAgICBtYXJnaW46IDAuNXJlbSAwOwogICAgcGFkZGluZzogMC41cmVtOwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgY29sb3I6ICNmZmQ7Cn0KCi5pdGVtLWFuYWx5c2lzIHsKICAgIGZvbnQtc2l6ZTogMC45cmVtOwogICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgIG1hcmdpbi1ib3R0b206IDAuOHJlbTsKfQoKLml0ZW0taW9jcyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwogICAgZ2FwOiAwLjVyZW07CiAgICBtYXJnaW4tdG9wOiAwLjVyZW07Cn0KCi5pb2MtYmFkZ2UgewogICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgZm9udC1mYW1pbHk6ICdKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZTsKICAgIHBhZGRpbmc6IDAuMnJlbSAwLjZyZW07CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4xKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoNTksIDEzMCwgMjQ2LCAwLjIpOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBnYXA6IDAuNHJlbTsKfQoKLmlvYy1iYWRnZTo6YmVmb3JlIHsKICAgIGNvbnRlbnQ6ICJJT0MiOwogICAgZm9udC1zaXplOiAwLjZyZW07CiAgICBmb250LXdlaWdodDogODAwOwogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOwogICAgYmFja2dyb3VuZDogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMik7CiAgICBwYWRkaW5nOiAwLjFyZW0gMC4zcmVtOwogICAgYm9yZGVyLXJhZGl1czogMnB4Owp9CgouaW9jLWJhZGdlLmlvYy1pcCB7CiAgICBib3JkZXItY29sb3I6IHJnYmEoMTYsIDE4NSwgMTI5LCAwLjMpOwogICAgY29sb3I6IHZhcigtLXN1Y2Nlc3MpOwp9CgouaW9jLWJhZGdlLmlvYy1kb21haW4gewogICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI0NSwgMTU4LCAxMSwgMC4zKTsKICAgIGNvbG9yOiB2YXIoLS13YXJuaW5nKTsKfQoKLmlvYy1iYWRnZS5pb2MtaGFzaCB7CiAgICBib3JkZXItY29sb3I6IHJnYmEoMjM5LCA2OCwgNjgsIDAuMyk7CiAgICBjb2xvcjogdmFyKC0tYWNjZW50KTsKfQoKLmxvYWRpbmctc3RhdGUgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6IHZhcigtLXRleHQtZGltKTsKICAgIHBhZGRpbmc6IDJyZW07Cn0KCi5yZXBvcnRzLWNhcmQgewogICAgbWFyZ2luLXRvcDogMS41cmVtOwogICAgbWF4LWhlaWdodDogMjUwcHg7CiAgICBvdmVyZmxvdy15OiBhdXRvOwp9CgoucmVwb3J0LWl0ZW0gewogICAgcGFkZGluZzogMC44cmVtOwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjAzKTsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4yczsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Cn0KCi5yZXBvcnQtaXRlbTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWdsb3cpOwp9CgoucmVwb3J0LXRpdGxlIHsKICAgIGZvbnQtc2l6ZTogMC44NXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7Cn0KCi5yZXBvcnQtbWV0YSB7CiAgICBmb250LXNpemU6IDAuNzVyZW07CiAgICBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOwogICAgbWFyZ2luLXRvcDogMC4zcmVtOwp9CgovKiBNb2RhbCBTdHlsaW5nICovCi5tb2RhbCB7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGZpeGVkOwogICAgei1pbmRleDogMTAwMDsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44KTsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig1cHgpOwp9CgoubW9kYWwtY29udGVudCB7CiAgICBtYXJnaW46IDUlIGF1dG87CiAgICBwYWRkaW5nOiAycmVtOwogICAgd2lkdGg6IDcwJTsKICAgIG1heC13aWR0aDogOTAwcHg7CiAgICBtYXgtaGVpZ2h0OiA4MHZoOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmNsb3NlLW1vZGFsIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAxLjVyZW07CiAgICB0b3A6IDFyZW07CiAgICBmb250LXNpemU6IDJyZW07CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBjb2xvcjogdmFyKC0tdGV4dC1kaW0pOwp9CgouY2xvc2UtbW9kYWw6aG92ZXIgewogICAgY29sb3I6IHZhcigtLXRleHQpOwp9CgojbW9kYWwtcmVwb3J0LWJvZHkgewogICAgbGluZS1oZWlnaHQ6IDEuNjsKfQoKI21vZGFsLXJlcG9ydC1ib2R5IGgyIHsKICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsKICAgIG1hcmdpbjogMS41cmVtIDAgMC41cmVtIDA7Cn0=",
    "docker-compose.yml": "dmVyc2lvbjogJzMuOScKCnNlcnZpY2VzOgogICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICMgU0hBUkVEIElORlJBU1RSVUNUVVJFIChFbGFzdGljc2VhcmNoKQogICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIGVsYXN0aWNzZWFyY2gtc29jOgogICAgaW1hZ2U6IGRvY2tlci5lbGFzdGljLmNvL2VsYXN0aWNzZWFyY2gvZWxhc3RpY3NlYXJjaC1vc3M6JHtFTEFTVElDU0VBUkNIX1ZFUlNJT059CiAgICBjb250YWluZXJfbmFtZTogZWxhc3RpY3NlYXJjaC1zb2MKICAgIHJlc3RhcnQ6IGFsd2F5cwogICAgZW52aXJvbm1lbnQ6CiAgICAgIC0gaHR0cC5ob3N0PTAuMC4wLjAKICAgICAgLSBkaXNjb3ZlcnkudHlwZT1zaW5nbGUtbm9kZQogICAgICAtICJFU19KQVZBX09QVFM9LVhtczFnIC1YbXgxZyIKICAgIHBvcnRzOgogICAgICAtICI5MjAwOjkyMDAiCiAgICB2b2x1bWVzOgogICAgICAtIGVsYXN0aWNzZWFyY2hfc29jX2RhdGE6L3Vzci9zaGFyZS9lbGFzdGljc2VhcmNoL2RhdGEKICAgIHVsaW1pdHM6CiAgICAgIG1lbWxvY2s6CiAgICAgICAgc29mdDogLTEKICAgICAgICBoYXJkOiAtMQogICAgICBub2ZpbGU6CiAgICAgICAgc29mdDogNjU1MzYKICAgICAgICBoYXJkOiA2NTUzNgoKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAjIEdSQVlMT0cgU1RBQ0sgKExvZyBNYW5hZ2VtZW50ICYgU0lFTSkKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBtb25nbzoKICAgIGltYWdlOiBtb25nbzo2CiAgICBjb250YWluZXJfbmFtZTogZ3JheWxvZy1tb25nbwogICAgcmVzdGFydDogYWx3YXlzCiAgICB2b2x1bWVzOgogICAgICAtIG1vbmdvX2RhdGE6L2RhdGEvZGIKCiAgZ3JheWxvZzoKICAgIGltYWdlOiBncmF5bG9nL2dyYXlsb2c6NS4yCiAgICBjb250YWluZXJfbmFtZTogZ3JheWxvZwogICAgcmVzdGFydDogYWx3YXlzCiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBHUkFZTE9HX1BBU1NXT1JEX1NFQ1JFVD0ke0dSQVlMT0dfUEFTU1dPUkRfU0VDUkVUfQogICAgICAtIEdSQVlMT0dfUk9PVF9QQVNTV09SRF9TSEEyPSR7R1JBWUxPR19ST09UX1BBU1NXT1JEX1NIQTJ9CiAgICAgIC0gR1JBWUxPR19IVFRQX0VYVEVSTkFMX1VSST1odHRwOi8vMTI3LjAuMC4xOjkwMDAvCiAgICAgIC0gR1JBWUxPR19FTEFTVElDU0VBUkNIX0hPU1RTPWh0dHA6Ly9lbGFzdGljc2VhcmNoLXNvYzo5MjAwCiAgICBlbnRyeXBvaW50OiAvdXNyL2Jpbi90aW5pIC0tIC9kb2NrZXItZW50cnlwb2ludC5zaAogICAgZGVwZW5kc19vbjoKICAgICAgLSBtb25nbwogICAgICAtIGVsYXN0aWNzZWFyY2gtc29jCiAgICBwb3J0czoKICAgICAgLSAiOTAwMDo5MDAwIiAgICAgICAgIyBXZWIgVUkKICAgICAgLSAiMTIyMDE6MTIyMDEvdWRwIiAgIyBHRUxGCiAgICAgIC0gIjE1MTQ6MTUxNC91ZHAiICAgICMgU3lzbG9nIFVEUAogICAgICAtICIxNTE0OjE1MTQiICAgICAgICAjIFN5c2xvZyBUQ1AKICAgIHZvbHVtZXM6CiAgICAgIC0gZ3JheWxvZ19kYXRhOi91c3Ivc2hhcmUvZ3JheWxvZy9kYXRhCgogICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICMgVEhFSElWRSBTVEFDSyAoSW5jaWRlbnQgUmVzcG9uc2UpCiAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgY2Fzc2FuZHJhOgogICAgaW1hZ2U6IGNhc3NhbmRyYToke0NBU1NBTkRSQV9WRVJTSU9OfQogICAgY29udGFpbmVyX25hbWU6IGNhc3NhbmRyYQogICAgaG9zdG5hbWU6IGNhc3NhbmRyYQogICAgcmVzdGFydDogYWx3YXlzCiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBDQVNTQU5EUkFfQ0xVU1RFUl9OQU1FPXRocAogICAgdm9sdW1lczoKICAgICAgLSBjYXNzYW5kcmFfZGF0YTovdmFyL2xpYi9jYXNzYW5kcmEKICAgIHBvcnRzOgogICAgICAtICI5MDQyOjkwNDIiCgogIHRoZWhpdmU6CiAgICBpbWFnZTogdGhlaGl2ZXByb2plY3QvdGhlaGl2ZTQ6JHtUSEVISVZFX1ZFUlNJT059CiAgICBjb250YWluZXJfbmFtZTogdGhlaGl2ZQogICAgcmVzdGFydDogYWx3YXlzCiAgICBkZXBlbmRzX29uOgogICAgICAtIGNhc3NhbmRyYQogICAgICAtIGVsYXN0aWNzZWFyY2gtc29jCiAgICAgIC0gY29ydGV4CiAgICBwb3J0czoKICAgICAgLSAiOTAwMTo5MDAwIgogICAgdm9sdW1lczoKICAgICAgLSAuL3RoZWhpdmUvYXBwbGljYXRpb24uY29uZjovZXRjL3RoZWhpdmUvYXBwbGljYXRpb24uY29uZgogICAgICAtIHRoZWhpdmVfZGF0YTovb3B0L3RocC90aGVoaXZlL2ZpbGVzCiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBUSEVISVZFX1NFQ1JFVD0ke1RIRUhJVkVfU0VDUkVUfQogICAgICAtIENPUlRFWF9BUElfS0VZPSR7Q09SVEVYX0FQSV9LRVl9CiAgICBjb21tYW5kOiAtLW5vLWNvbmZpZy1zZWNyZXQKCiAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIyBDT1JURVggU1RBQ0sgKEFuYWx5c2lzICYgRW5yaWNobWVudCkKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBjb3J0ZXg6CiAgICBpbWFnZTogdGhlaGl2ZXByb2plY3QvY29ydGV4OiR7Q09SVEVYX1ZFUlNJT059CiAgICBjb250YWluZXJfbmFtZTogY29ydGV4CiAgICByZXN0YXJ0OiBhbHdheXMKICAgIGRlcGVuZHNfb246CiAgICAgIC0gZWxhc3RpY3NlYXJjaC1zb2MKICAgIHBvcnRzOgogICAgICAtICI5MDAyOjkwMDAiCiAgICB2b2x1bWVzOgogICAgICAtIC4vY29ydGV4L2FwcGxpY2F0aW9uLmNvbmY6L2V0Yy9jb3J0ZXgvYXBwbGljYXRpb24uY29uZgogICAgICAtIC92YXIvcnVuL2RvY2tlci5zb2NrOi92YXIvcnVuL2RvY2tlci5zb2NrCiAgICAgIC0gL3RtcDovdG1wCiAgICBlbnZpcm9ubWVudDoKICAgICAgIC0gSk9CX0RJUkVDVE9SWT0vdG1wL2NvcnRleC1qb2JzCiAgICAgICAtIENPUlRFWF9TRUNSRVQ9JHtDT1JURVhfU0VDUkVUfQoKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAjIEdSQUZBTkEgU1RBQ0sgKFZpc3VhbGl6YXRpb24gJiBEYXNoYm9hcmRzKQogICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIGdyYWZhbmE6CiAgICBpbWFnZTogZ3JhZmFuYS9ncmFmYW5hLW9zczpsYXRlc3QKICAgIGNvbnRhaW5lcl9uYW1lOiBncmFmYW5hCiAgICByZXN0YXJ0OiBhbHdheXMKICAgIHBvcnRzOgogICAgICAtICIzMDAwOjMwMDAiCiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBHRl9TRUNVUklUWV9BRE1JTl9QQVNTV09SRD0ke0dSQUZBTkFfQURNSU5fUEFTU1dPUkR9CiAgICB2b2x1bWVzOgogICAgICAtIGdyYWZhbmFfZGF0YTovdmFyL2xpYi9ncmFmYW5hCiAgICAgIC0gLi9ncmFmYW5hL2RhdGFzb3VyY2VzLnltbDovZXRjL2dyYWZhbmEvcHJvdmlzaW9uaW5nL2RhdGFzb3VyY2VzL2RhdGFzb3VyY2VzLnltbAoKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAjIE9MTEFNQSAoTG9jYWwgTExNIFNlcnZlciAtIDEwMCUgTG9jYWwsIE5vIERhdGEgTGVhdmVzKQogICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIG9sbGFtYToKICAgIGltYWdlOiBvbGxhbWEvb2xsYW1hOmxhdGVzdAogICAgY29udGFpbmVyX25hbWU6IG9sbGFtYQogICAgcmVzdGFydDogYWx3YXlzCiAgICBwb3J0czoKICAgICAgLSAiMTE0MzQ6MTE0MzQiCiAgICB2b2x1bWVzOgogICAgICAtIG9sbGFtYV9kYXRhOi9yb290Ly5vbGxhbWEKCiAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIyBTT0MtQUkgKEp1bmlvciBTT0MgQW5hbHlzdCAtIENvbm5lY3RzIEdyYXlsb2cg4oaSIExMTSDihpIgVGhlSGl2ZSkKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBzb2MtYWk6CiAgICBidWlsZDogLi9zb2MtYWkKICAgIGNvbnRhaW5lcl9uYW1lOiBzb2MtYWkKICAgIHJlc3RhcnQ6IGFsd2F5cwogICAgcG9ydHM6CiAgICAgIC0gIjUwMDA6NTAwMCIKICAgIGVudmlyb25tZW50OgogICAgICAtIEdSQVlMT0dfVVJMPWh0dHA6Ly9ncmF5bG9nOjkwMDAKICAgICAgLSBHUkFZTE9HX1VTRVI9YWRtaW4KICAgICAgLSBHUkFZTE9HX1BBU1M9YWRtaW4KICAgICAgLSBPTExBTUFfVVJMPWh0dHA6Ly9vbGxhbWE6MTE0MzQKICAgICAgLSBPTExBTUFfTU9ERUw9cXdlbjIuNToxLjViCiAgICAgIC0gVEhFSElWRV9VUkw9aHR0cDovL3RoZWhpdmU6OTAwMAogICAgICAtIFRIRUhJVkVfQVBJX0tFWT0ke1RIRUhJVkVfQVBJX0tFWTotfQogICAgICAtIEFMSUVOVkFVTFRfT1RYX0tFWT0ke0FMSUVOVkFVTFRfT1RYX0tFWTotfQogICAgICAtIFBPTExfSU5URVJWQUw9NjAKICAgIGRlcGVuZHNfb246CiAgICAgIC0gZ3JheWxvZwogICAgICAtIG9sbGFtYQogICAgICAtIHRoZWhpdmUKCiAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIyBTSU5HTEUgUEFORSBPRiBHTEFTUyBEQVNIQk9BUkQKICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBkYXNoYm9hcmQ6CiAgICBpbWFnZTogbmdpbng6YWxwaW5lCiAgICBjb250YWluZXJfbmFtZTogc29jLWRhc2hib2FyZAogICAgcmVzdGFydDogYWx3YXlzCiAgICBwb3J0czoKICAgICAgLSAiODA4MDo4MCIKICAgIHZvbHVtZXM6CiAgICAgIC0gLi9kYXNoYm9hcmQ6L3Vzci9zaGFyZS9uZ2lueC9odG1sCiAgICBkZXBlbmRzX29uOgogICAgICAtIHNvYy1haQoKdm9sdW1lczoKICBlbGFzdGljc2VhcmNoX3NvY19kYXRhOgogIG1vbmdvX2RhdGE6CiAgZ3JheWxvZ19kYXRhOgogIGNhc3NhbmRyYV9kYXRhOgogIHRoZWhpdmVfZGF0YToKICBncmFmYW5hX2RhdGE6CiAgb2xsYW1hX2RhdGE6CgpuZXR3b3JrczoKICBkZWZhdWx0OgogICAgZHJpdmVyOiBicmlkZ2U=",
    "grafana/datasources.yml": "YXBpVmVyc2lvbjogMQpkYXRhc291cmNlczoKICAtIG5hbWU6IEVsYXN0aWNzZWFyY2gtU09DCiAgICB0eXBlOiBlbGFzdGljc2VhcmNoCiAgICBhY2Nlc3M6IHByb3h5CiAgICB1cmw6IGh0dHA6Ly9lbGFzdGljc2VhcmNoLXNvYzo5MjAwCiAgICBkYXRhYmFzZTogImdyYXlsb2dfKiIKICAgIGlzRGVmYXVsdDogdHJ1ZQogICAganNvbkRhdGE6CiAgICAgIHRpbWVGaWVsZDogInRpbWVzdGFtcCIKICAgICAgZXNWZXJzaW9uOiAiNy4xMC4wIgo=",
    "soc-ai/Dockerfile": "RlJPTSBweXRob246My4xMS1zbGltCldPUktESVIgL2FwcApDT1BZIHJlcXVpcmVtZW50cy50eHQgLgpSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgLXIgcmVxdWlyZW1lbnRzLnR4dApDT1BZIGFwcC5weSAuCkNNRCBbInB5dGhvbiIsICItdSIsICJhcHAucHkiXQo=",
    "soc-ai/app.py": "aW1wb3J0IHJlCmltcG9ydCBoYXNobGliCmltcG9ydCB0aW1lCmltcG9ydCBqc29uCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgb3MKaW1wb3J0IHRocmVhZGluZwpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZXF1ZQpmcm9tIGZsYXNrIGltcG9ydCBGbGFzaywganNvbmlmeQpmcm9tIGZsYXNrX2NvcnMgaW1wb3J0IENPUlMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQoKIyBDb25maWd1cmF0aW9uIGZyb20gZW52aXJvbm1lbnQKR1JBWUxPR19VUkwgPSBvcy5nZXRlbnYoIkdSQVlMT0dfVVJMIiwgImh0dHA6Ly9ncmF5bG9nOjkwMDAiKQpHUkFZTE9HX1VTRVIgPSBvcy5nZXRlbnYoIkdSQVlMT0dfVVNFUiIsICJhZG1pbiIpCkdSQVlMT0dfUEFTUyA9IG9zLmdldGVudigiR1JBWUxPR19QQVNTIiwgImFkbWluIikKT0xMQU1BX1VSTCA9IG9zLmdldGVudigiT0xMQU1BX1VSTCIsICJodHRwOi8vb2xsYW1hOjExNDM0IikKT0xMQU1BX01PREVMID0gb3MuZ2V0ZW52KCJPTExBTUFfTU9ERUwiLCAicXdlbjIuNToxLjViIikKVEhFSElWRV9VUkwgPSBvcy5nZXRlbnYoIlRIRUhJVkVfVVJMIiwgImh0dHA6Ly90aGVoaXZlOjkwMDAiKQpUSEVISVZFX0FQSV9LRVkgPSBvcy5nZXRlbnYoIlRIRUhJVkVfQVBJX0tFWSIsICIiKQpDT1JURVhfVVJMID0gb3MuZ2V0ZW52KCJDT1JURVhfVVJMIiwgImh0dHA6Ly9jb3J0ZXg6OTAwMCIpCkNPUlRFWF9BUElfS0VZID0gb3MuZ2V0ZW52KCJDT1JURVhfQVBJX0tFWSIsICIiKQpPVFhfS0VZID0gb3MuZ2V0ZW52KCJBTElFTlZBVUxUX09UWF9LRVkiLCAiIikKUE9MTF9JTlRFUlZBTCA9IGludChvcy5nZXRlbnYoIlBPTExfSU5URVJWQUwiLCAiNjAiKSkKCiMgR2xvYmFsIGhpc3RvcnkgZm9yIHRoZSBkYXNoYm9hcmQKYW5hbHlzaXNfaGlzdG9yeSA9IGRlcXVlKG1heGxlbj01MCkKcmVwb3J0X2hpc3RvcnkgPSBkZXF1ZShtYXhsZW49MjApCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQpDT1JTKGFwcCkKCkBhcHAucm91dGUoJy9hcGkvaGlzdG9yeScsIG1ldGhvZHM9WydHRVQnXSkKZGVmIGdldF9oaXN0b3J5KCk6CiAgICByZXR1cm4ganNvbmlmeShsaXN0KGFuYWx5c2lzX2hpc3RvcnkpKQoKQGFwcC5yb3V0ZSgnL2FwaS9yZXBvcnRzJywgbWV0aG9kcz1bJ0dFVCddKQpkZWYgZ2V0X3JlcG9ydHMoKToKICAgIHJldHVybiBqc29uaWZ5KGxpc3QocmVwb3J0X2hpc3RvcnkpKQoKQGFwcC5yb3V0ZSgnL2FwaS9oZWFsdGgnLCBtZXRob2RzPVsnR0VUJ10pCmRlZiBoZWFsdGgoKToKICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogInJ1bm5pbmciLCAibW9kZWwiOiBPTExBTUFfTU9ERUx9KQoKZGVmIHN0YXJ0X2FwaSgpOgogICAgYXBwLnJ1bihob3N0PScwLjAuMC4wJywgcG9ydD01MDAwLCBkZWJ1Zz1GYWxzZSwgdXNlX3JlbG9hZGVyPUZhbHNlKQoKU09DX1NZU1RFTV9QUk9NUFQgPSAiIiJZb3UgYXJlIGEgSnVuaW9yIFNPQyBBbmFseXN0IEFJLiBZb3VyIGpvYiBpcyB0byBhbmFseXplIHNlY3VyaXR5IGxvZyBlbnRyaWVzIGFuZCBwcm92aWRlIGEgYnJpZWYgc2VjdXJpdHkgYXNzZXNzbWVudC4KCkZvciBlYWNoIGxvZyBlbnRyeSwgcmVzcG9uZCBpbiB0aGlzIEVYQUNUIGZvcm1hdDoKU0VWRVJJVFk6IExPVyB8IE1FRElVTSB8IEhJR0ggfCBDUklUSUNBTApDQVRFR09SWTogKGUuZy4sIEF1dGhlbnRpY2F0aW9uLCBOZXR3b3JrLCBNYWx3YXJlLCBQb2xpY3kgVmlvbGF0aW9uLCBSZWNvbm5haXNzYW5jZSwgTm9ybWFsKQpTVU1NQVJZOiAoMSBzZW50ZW5jZSBkZXNjcmliaW5nIHdoYXQgaGFwcGVuZWQpCkFDVElPTjogKDEgc2VudGVuY2UgcmVjb21tZW5kaW5nIHdoYXQgdGhlIFNPQyB0ZWFtIHNob3VsZCBkbykKCkJlIGNvbmNpc2UuIEZvY3VzIG9uIHNlY3VyaXR5IHJlbGV2YW5jZS4iIiIKClJFUE9SVF9TWVNURU1fUFJPTVBUID0gIiIiWW91IGFyZSBhIFNlbmlvciBTZWN1cml0eSBBbmFseXN0IEFJLiBZb3VyIHRhc2sgaXMgdG8gZ2VuZXJhdGUgYSBwcm9mZXNzaW9uYWwgUG9zdC1JbmNpZGVudCBSZXBvcnQgKFBJUikgZm9yIGEgY2xvc2VkIHNlY3VyaXR5IGNhc2UuClN1bW1hcml6ZSB0aGUgaW5jaWRlbnQsIHRoZSBldmlkZW5jZSBmb3VuZCAob2JzZXJ2YWJsZXMpLCB0aGUgQUkgYW5hbHlzaXMsIGFuZCBwcm92aWRlIGxvbmctdGVybSBtaXRpZ2F0aW9uIHN0ZXBzLgpGb3JtYXQgdGhlIHJlcG9ydCB1c2luZyBNYXJrZG93biB3aXRoIGNsZWFyIGhlYWRlcnM6ICMjIEV4ZWN1dGl2ZSBTdW1tYXJ5LCAjIyBJbmNpZGVudCBUaW1lbGluZSwgIyMgVGVjaG5pY2FsIEFuYWx5c2lzLCBhbmQgIyMgRnV0dXJlIFJlY29tbWVuZGF0aW9ucy4iIiIKCgpkZWYgd2FpdF9mb3Jfc2VydmljZXMoKToKICAgICIiIldhaXQgZm9yIEdyYXlsb2cgYW5kIE9sbGFtYSB0byBiZWNvbWUgYXZhaWxhYmxlLiIiIgogICAgcHJpbnQoIltTT0MtQUldIFdhaXRpbmcgZm9yIHNlcnZpY2VzIHRvIGNvbWUgb25saW5lLi4uIikKCiAgICAjIFdhaXQgZm9yIE9sbGFtYQogICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldChmIntPTExBTUFfVVJMfS9hcGkvdGFncyIsIHRpbWVvdXQ9NSkKICAgICAgICAgICAgaWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBwcmludCgiW1NPQy1BSV0gT2xsYW1hIGlzIHJlYWR5ISIpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHBhc3MKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbU09DLUFJXSBXQVJOSU5HOiBPbGxhbWEgbm90IHJlYWNoYWJsZSwgd2lsbCByZXRyeSBkdXJpbmcgcG9sbGluZyIpCgogICAgIyBXYWl0IGZvciBHcmF5bG9nCiAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgZiJ7R1JBWUxPR19VUkx9L2FwaS9zeXN0ZW0iLAogICAgICAgICAgICAgICAgYXV0aD0oR1JBWUxPR19VU0VSLCBHUkFZTE9HX1BBU1MpLAogICAgICAgICAgICAgICAgaGVhZGVycz17IkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIn0sCiAgICAgICAgICAgICAgICB0aW1lb3V0PTUsCiAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBwcmludCgiW1NPQy1BSV0gR3JheWxvZyBpcyByZWFkeSEiKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBwYXNzCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgZWxzZToKICAgICAgICBwcmludCgiW1NPQy1BSV0gV0FSTklORzogR3JheWxvZyBub3QgcmVhY2hhYmxlLCB3aWxsIHJldHJ5IGR1cmluZyBwb2xsaW5nIikKCgpkZWYgcHVsbF9tb2RlbCgpOgogICAgIiIiRW5zdXJlIHRoZSBPbGxhbWEgbW9kZWwgaXMgZG93bmxvYWRlZC4iIiIKICAgIHByaW50KGYiW1NPQy1BSV0gUHVsbGluZyBtb2RlbCAne09MTEFNQV9NT0RFTH0nICh0aGlzIG1heSB0YWtlIGEgZmV3IG1pbnV0ZXMgb24gZmlyc3QgcnVuKS4uLiIpCiAgICB0cnk6CiAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoCiAgICAgICAgICAgIGYie09MTEFNQV9VUkx9L2FwaS9wdWxsIiwKICAgICAgICAgICAganNvbj17Im5hbWUiOiBPTExBTUFfTU9ERUx9LAogICAgICAgICAgICB0aW1lb3V0PTYwMCwKICAgICAgICAgICAgc3RyZWFtPVRydWUsCiAgICAgICAgKQogICAgICAgIGZvciBsaW5lIGluIHIuaXRlcl9saW5lcygpOgogICAgICAgICAgICBpZiBsaW5lOgogICAgICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMobGluZSkKICAgICAgICAgICAgICAgIHN0YXR1cyA9IGRhdGEuZ2V0KCJzdGF0dXMiLCAiIikKICAgICAgICAgICAgICAgIGlmICJwdWxsaW5nIiBpbiBzdGF0dXMgb3IgImRvd25sb2FkIiBpbiBzdGF0dXMubG93ZXIoKToKICAgICAgICAgICAgICAgICAgICBwcmludChmIltTT0MtQUldIHtzdGF0dXN9IikKICAgICAgICBwcmludChmIltTT0MtQUldIE1vZGVsICd7T0xMQU1BX01PREVMfScgaXMgcmVhZHkhIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltTT0MtQUldIEVSUk9SIHB1bGxpbmcgbW9kZWw6IHtlfSIpCgoKZGVmIHF1ZXJ5X2dyYXlsb2coc2luY2VfbWludXRlcz0yKToKICAgICIiIkZldGNoIHJlY2VudCBsb2cgbWVzc2FnZXMgZnJvbSBHcmF5bG9nLiIiIgogICAgdHJ5OgogICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgInF1ZXJ5IjogIioiLAogICAgICAgICAgICAicmFuZ2UiOiBzaW5jZV9taW51dGVzICogNjAsCiAgICAgICAgICAgICJsaW1pdCI6IDEwLAogICAgICAgICAgICAic29ydCI6ICJ0aW1lc3RhbXA6ZGVzYyIsCiAgICAgICAgfQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgIGYie0dSQVlMT0dfVVJMfS9hcGkvc2VhcmNoL3VuaXZlcnNhbC9yZWxhdGl2ZSIsCiAgICAgICAgICAgIHBhcmFtcz1wYXJhbXMsCiAgICAgICAgICAgIGF1dGg9KEdSQVlMT0dfVVNFUiwgR1JBWUxPR19QQVNTKSwKICAgICAgICAgICAgaGVhZGVycz17IkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIn0sCiAgICAgICAgICAgIHRpbWVvdXQ9MTAsCiAgICAgICAgKQogICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBkYXRhID0gci5qc29uKCkKICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0KCJtZXNzYWdlcyIsIFtdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW1NPQy1BSV0gRXJyb3IgcXVlcnlpbmcgR3JheWxvZzoge2V9IikKICAgICAgICByZXR1cm4gW10KCgpkZWYgZXh0cmFjdF9pb2NzKHRleHQpOgogICAgIiIiRXh0cmFjdCBJUHMsIERvbWFpbnMsIGFuZCBIYXNoZXMgZnJvbSB0ZXh0IHVzaW5nIHJlZ2V4LiIiIgogICAgaW9jcyA9IHsKICAgICAgICAiaXAiOiBsaXN0KHNldChyZS5maW5kYWxsKHInXGIoPzpcZHsxLDN9XC4pezN9XGR7MSwzfVxiJywgdGV4dCkpKSwKICAgICAgICAiZG9tYWluIjogbGlzdChzZXQocmUuZmluZGFsbChyJ1xiKD86W2EtejAtOV0oPzpbYS16MC05LV17MCw2MX1bYS16MC05XSk/XC4pK1thLXpdezIsNn1cYicsIHRleHQubG93ZXIoKSkpKSwKICAgICAgICAiaGFzaCI6IGxpc3Qoc2V0KHJlLmZpbmRhbGwocidcYlthLWZBLUYwLTldezMyLDY0fVxiJywgdGV4dCkpKQogICAgfQogICAgIyBGaWx0ZXIgb3V0IGNvbW1vbiBmYWxzZSBwb3NpdGl2ZXMgZm9yIGRvbWFpbnMgKGxpa2UgZmlsZSBleHRlbnNpb25zIGlmIHRoZXkgbG9vayBsaWtlIGRvbWFpbnMpCiAgICBpb2NzWyJkb21haW4iXSA9IFtkIGZvciBkIGluIGlvY3NbImRvbWFpbiJdIGlmIG5vdCBkLmVuZHN3aXRoKCgnLnB5JywgJy5qcycsICcudHh0JywgJy5sb2cnLCAnLmNvbmYnLCAnLnltbCcpKV0KICAgIHJldHVybiBpb2NzCgoKZGVmIHJ1bl9jb3J0ZXhfYW5hbHl6ZXIoZGF0YV90eXBlLCBkYXRhX3ZhbHVlKToKICAgICIiIlRyaWdnZXIgQ29ydGV4IE9UWFF1ZXJ5IGFuYWx5emVyIGFuZCB3YWl0IGZvciByZXN1bHRzLiIiIgogICAgaWYgbm90IENPUlRFWF9BUElfS0VZIG9yIG5vdCBDT1JURVhfVVJMOgogICAgICAgIHJldHVybiBOb25lCgogICAgdHJ5OgogICAgICAgICMgMS4gQ3JlYXRlIE9ic2VydmFibGUvU3VibWl0IEpvYgogICAgICAgICMgQ29ydGV4IGFuYWx5emVyIG5hbWVzIHVzdWFsbHkgdmFyeSwgT1RYIGlzIG9mdGVuICdPVFhRdWVyeV8xXzAnIG9yIHNpbWlsYXIKICAgICAgICAjIFdlJ2xsIHRyeSB0byBmaW5kIHRoZSBPVFggYW5hbHl6ZXIgZmlyc3Qgb3IgYXNzdW1lIGEgc3RhbmRhcmQgbmFtZQogICAgICAgIGhlYWRlcnMgPSB7IkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7Q09SVEVYX0FQSV9LRVl9In0KICAgICAgICAKICAgICAgICAjIEdldCBsaXN0IG9mIGFuYWx5emVycyB0byBmaW5kIHRoZSBleGFjdCBuYW1lCiAgICAgICAgYW5hbHl6ZXJzX3JlcSA9IHJlcXVlc3RzLmdldChmIntDT1JURVhfVVJMfS9hcGkvYW5hbHl6ZXIiLCBoZWFkZXJzPWhlYWRlcnMsIHRpbWVvdXQ9NSkKICAgICAgICBvdHhfYW5hbHl6ZXIgPSAiT1RYUXVlcnlfMl8wIiAjIERlZmF1bHQgZ3Vlc3MKICAgICAgICBpZiBhbmFseXplcnNfcmVxLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgZm9yIGEgaW4gYW5hbHl6ZXJzX3JlcS5qc29uKCk6CiAgICAgICAgICAgICAgICBpZiAiT1RYIiBpbiBhLmdldCgibmFtZSIsICIiKToKICAgICAgICAgICAgICAgICAgICBvdHhfYW5hbHl6ZXIgPSBhWyJuYW1lIl0KICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAjIFJ1biBhbmFseXplcgogICAgICAgIHJ1bl91cmwgPSBmIntDT1JURVhfVVJMfS9hcGkvYW5hbHl6ZXIve290eF9hbmFseXplcn0vcnVuIgogICAgICAgIHBheWxvYWQgPSB7ImRhdGEiOiBkYXRhX3ZhbHVlLCAiZGF0YVR5cGUiOiBkYXRhX3R5cGUsICJ0bHAiOiAyfQogICAgICAgIAogICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KHJ1bl91cmwsIGpzb249cGF5bG9hZCwgaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTEwKQogICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgIT0gMjAxOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAKICAgICAgICBqb2JfaWQgPSByLmpzb24oKS5nZXQoImlkIikKICAgICAgICAKICAgICAgICAjIDIuIFBvbGwgZm9yIGNvbXBsZXRpb24KICAgICAgICBmb3IgXyBpbiByYW5nZSgxMik6ICMgV2FpdCB1cCB0byA2MCBzZWNvbmRzCiAgICAgICAgICAgIGpvYl9yZXEgPSByZXF1ZXN0cy5nZXQoZiJ7Q09SVEVYX1VSTH0vYXBpL2pvYi97am9iX2lkfSIsIGhlYWRlcnM9aGVhZGVycywgdGltZW91dD01KQogICAgICAgICAgICBpZiBqb2JfcmVxLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGpvYl9kYXRhID0gam9iX3JlcS5qc29uKCkKICAgICAgICAgICAgICAgIGlmIGpvYl9kYXRhLmdldCgic3RhdHVzIikgPT0gIlN1Y2Nlc3MiOgogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9yZXEgPSByZXF1ZXN0cy5nZXQoZiJ7Q09SVEVYX1VSTH0vYXBpL2pvYi97am9iX2lkfS9yZXBvcnQiLCBoZWFkZXJzPWhlYWRlcnMsIHRpbWVvdXQ9NSkKICAgICAgICAgICAgICAgICAgICBpZiByZXBvcnRfcmVxLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9ydF9yZXEuanNvbigpCiAgICAgICAgICAgICAgICBlbGlmIGpvYl9kYXRhLmdldCgic3RhdHVzIikgPT0gIkZhaWx1cmUiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBDb3J0ZXggZXJyb3I6IHtlfSIpCiAgICByZXR1cm4gTm9uZQoKCmRlZiBxdWVyeV9vdHhfZGlyZWN0KGRhdGFfdHlwZSwgZGF0YV92YWx1ZSk6CiAgICAiIiJRdWVyeSBBbGllblZhdWx0IE9UWCBkaXJlY3RseSBhcyBhIGZhbGxiYWNrIG9yIHByaW1hcnkgZW5yaWNobWVudCBzb3VyY2UuIiIiCiAgICBpZiBub3QgT1RYX0tFWToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHRyeToKICAgICAgICAjIE1hcCBDb3J0ZXggZGF0YSB0eXBlcyB0byBPVFggQVBJIHNlY3Rpb25zCiAgICAgICAgb3R4X3R5cGUgPSAnSVB2NCcgaWYgZGF0YV90eXBlID09ICdpcCcgZWxzZSAnZG9tYWluJyBpZiBkYXRhX3R5cGUgPT0gJ2RvbWFpbicgZWxzZSBOb25lCiAgICAgICAgaWYgbm90IG90eF90eXBlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICB1cmwgPSBmImh0dHBzOi8vb3R4LmFsaWVudmF1bHQuY29tL2FwaS92MS9pbmRpY2F0b3JzL3tvdHhfdHlwZX0ve2RhdGFfdmFsdWV9L2dlbmVyYWwiCiAgICAgICAgaGVhZGVycyA9IHsiWC1PVFgtQVBJLUtFWSI6IE9UWF9LRVl9CiAgICAgICAgCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycywgdGltZW91dD0xMCkKICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgZGF0YSA9IHIuanNvbigpCiAgICAgICAgICAgIHB1bHNlX2NvdW50ID0gZGF0YS5nZXQoInB1bHNlX2luZm8iLCB7fSkuZ2V0KCJjb3VudCIsIDApCiAgICAgICAgICAgIGlmIHB1bHNlX2NvdW50ID4gMDoKICAgICAgICAgICAgICAgIHB1bHNlcyA9IGRhdGEuZ2V0KCJwdWxzZV9pbmZvIiwge30pLmdldCgicHVsc2VzIiwgW10pCiAgICAgICAgICAgICAgICBwdWxzZV9uYW1lcyA9IFtwLmdldCgibmFtZSIpIGZvciBwIGluIHB1bHNlc1s6M11dCiAgICAgICAgICAgICAgICByZXR1cm4gZiJPVFggUHVsc2VzOiB7cHVsc2VfY291bnR9IChNYXRjaGVzOiB7JywgJy5qb2luKHB1bHNlX25hbWVzKX0pIgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW1NPQy1BSV0gT1RYIGRpcmVjdCBlcnJvcjoge2V9IikKICAgIHJldHVybiBOb25lCgoKZGVmIGNyZWF0ZV90aGVoaXZlX2FsZXJ0KGxvZ19lbnRyeSwgYW5hbHlzaXMsIGVucmljaG1lbnQ9IiIpOgogICAgIiIiQ3JlYXRlIGFuIGFsZXJ0IGluIFRoZUhpdmUgZm9yIEhJR0gvQ1JJVElDQUwgc2V2ZXJpdHkgZmluZGluZ3MuIiIiCiAgICBpZiBub3QgVEhFSElWRV9BUElfS0VZOgogICAgICAgIHJldHVybgoKICAgIHRyeToKICAgICAgICBtZXNzYWdlX3RleHQgPSBsb2dfZW50cnkuZ2V0KCJtZXNzYWdlIiwge30pLmdldCgibWVzc2FnZSIsICIiKVs6MjAwXQogICAgICAgIAogICAgICAgIGRlc2NyaXB0aW9uID0gZiIjIyBBSSBBbmFseXNpc1xuXG57YW5hbHlzaXN9XG5cbiIKICAgICAgICBpZiBlbnJpY2htZW50OgogICAgICAgICAgICBkZXNjcmlwdGlvbiArPSBmIiMjIFRocmVhdCBJbnRlbGxpZ2VuY2UgKE9UWClcblxue2VucmljaG1lbnR9XG5cbiIKICAgICAgICBkZXNjcmlwdGlvbiArPSBmIiMjIE9yaWdpbmFsIExvZ1xuXG5gYGBcbnttZXNzYWdlX3RleHR9XG5gYGAiCgogICAgICAgIGFsZXJ0X2RhdGEgPSB7CiAgICAgICAgICAgICJ0aXRsZSI6IGYiW1NPQy1BSV0gU2VjdXJpdHkgQWxlcnQ6IHttZXNzYWdlX3RleHRbOjgwXX0iLAogICAgICAgICAgICAiZGVzY3JpcHRpb24iOiBkZXNjcmlwdGlvbiwKICAgICAgICAgICAgInR5cGUiOiAiZXh0ZXJuYWwiLAogICAgICAgICAgICAic291cmNlIjogIlNPQy1BSSIsCiAgICAgICAgICAgICJzb3VyY2VSZWYiOiBmInNvYy1haS17aW50KHRpbWUudGltZSgpKX0iLAogICAgICAgICAgICAic2V2ZXJpdHkiOiAyLAogICAgICAgIH0KICAgICAgICByID0gcmVxdWVzdHMucG9zdCgKICAgICAgICAgICAgZiJ7VEhFSElWRV9VUkx9L2FwaS9hbGVydCIsCiAgICAgICAgICAgIGpzb249YWxlcnRfZGF0YSwKICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtUSEVISVZFX0FQSV9LRVl9IiwKICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRpbWVvdXQ9MTAsCiAgICAgICAgKQogICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgaW4gKDIwMCwgMjAxKToKICAgICAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBDcmVhdGVkIFRoZUhpdmUgYWxlcnQhIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmIltTT0MtQUldIFRoZUhpdmUgYWxlcnQgZXJyb3I6IHtyLnN0YXR1c19jb2RlfSB7ci50ZXh0WzoxMDBdfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBUaGVIaXZlIGVycm9yOiB7ZX0iKQoKCmRlZiBhbmFseXplX3dpdGhfbGxtKGxvZ19lbnRyeSk6CiAgICAiIiJTZW5kIGEgbG9nIGVudHJ5IHRvIE9sbGFtYSBmb3Igc2VjdXJpdHkgYW5hbHlzaXMuIiIiCiAgICB0cnk6CiAgICAgICAgbWVzc2FnZV90ZXh0ID0gbG9nX2VudHJ5LmdldCgibWVzc2FnZSIsIHt9KS5nZXQoIm1lc3NhZ2UiLCBzdHIobG9nX2VudHJ5KSkKICAgICAgICBzb3VyY2UgPSBsb2dfZW50cnkuZ2V0KCJtZXNzYWdlIiwge30pLmdldCgic291cmNlIiwgInVua25vd24iKQogICAgICAgIHRpbWVzdGFtcCA9IGxvZ19lbnRyeS5nZXQoIm1lc3NhZ2UiLCB7fSkuZ2V0KCJ0aW1lc3RhbXAiLCAidW5rbm93biIpCgogICAgICAgIHVzZXJfcHJvbXB0ID0gZiIiIkFuYWx5emUgdGhpcyBzZWN1cml0eSBsb2cgZW50cnk6CgpTb3VyY2U6IHtzb3VyY2V9ClRpbWU6IHt0aW1lc3RhbXB9Ck1lc3NhZ2U6IHttZXNzYWdlX3RleHR9CiIiIgogICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICBmIntPTExBTUFfVVJMfS9hcGkvY2hhdCIsCiAgICAgICAgICAgIGpzb249ewogICAgICAgICAgICAgICAgIm1vZGVsIjogT0xMQU1BX01PREVMLAogICAgICAgICAgICAgICAgIm1lc3NhZ2VzIjogWwogICAgICAgICAgICAgICAgICAgIHsicm9sZSI6ICJzeXN0ZW0iLCAiY29udGVudCI6IFNPQ19TWVNURU1fUFJPTVBUfSwKICAgICAgICAgICAgICAgICAgICB7InJvbGUiOiAidXNlciIsICJjb250ZW50IjogdXNlcl9wcm9tcHR9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICJzdHJlYW0iOiBGYWxzZSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGltZW91dD0xMjAsCiAgICAgICAgKQoKICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgcmV0dXJuIHIuanNvbigpLmdldCgibWVzc2FnZSIsIHt9KS5nZXQoImNvbnRlbnQiLCAiTm8gcmVzcG9uc2UiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBmIkxMTSBFcnJvcjoge3Iuc3RhdHVzX2NvZGV9IgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBmIkxMTSBFcnJvcjoge2V9IgoKCmRlZiBtYWluKCk6CiAgICBwcmludCgiPSIgKiA2MCkKICAgIHByaW50KCIgIFNPQy1BSSBKdW5pb3IgQW5hbHlzdCIpCiAgICBwcmludCgiICBQb3dlcmVkIGJ5IE9sbGFtYSArIEdyYXlsb2cgKyBUaGVIaXZlIikKICAgIHByaW50KCI9IiAqIDYwKQoKICAgIHdhaXRfZm9yX3NlcnZpY2VzKCkKICAgIHB1bGxfbW9kZWwoKQoKICAgIHByaW50KGYiXG5bU09DLUFJXSBTdGFydGluZyBwYXRyb2wgbG9vcCAoZXZlcnkge1BPTExfSU5URVJWQUx9cykuLi5cbiIpCiAgICBzZWVuX2lkcyA9IHNldCgpCgogICAgd2hpbGUgVHJ1ZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1lc3NhZ2VzID0gcXVlcnlfZ3JheWxvZygpCgogICAgICAgICAgICBuZXdfbWVzc2FnZXMgPSBbXQogICAgICAgICAgICBmb3IgbXNnIGluIG1lc3NhZ2VzOgogICAgICAgICAgICAgICAgbXNnX2lkID0gbXNnLmdldCgibWVzc2FnZSIsIHt9KS5nZXQoIl9pZCIsICIiKQogICAgICAgICAgICAgICAgaWYgbXNnX2lkIGFuZCBtc2dfaWQgbm90IGluIHNlZW5faWRzOgogICAgICAgICAgICAgICAgICAgIHNlZW5faWRzLmFkZChtc2dfaWQpCiAgICAgICAgICAgICAgICAgICAgbmV3X21lc3NhZ2VzLmFwcGVuZChtc2cpCgogICAgICAgICAgICBpZiBuZXdfbWVzc2FnZXM6CiAgICAgICAgICAgICAgICBwcmludChmIlxuW1NPQy1BSV0gRm91bmQge2xlbihuZXdfbWVzc2FnZXMpfSBuZXcgbG9nIGVudHJpZXMuIEFuYWx5emluZy4uLiIpCgogICAgICAgICAgICAgICAgZm9yIG1zZyBpbiBuZXdfbWVzc2FnZXNbOjVdOiAgIyBMaW1pdCB0byA1IHBlciBjeWNsZSBmb3IgQ1BVCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV90ZXh0ID0gbXNnLmdldCgibWVzc2FnZSIsIHt9KS5nZXQoIm1lc3NhZ2UiLCAiIikKICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBtc2cuZ2V0KCJtZXNzYWdlIiwge30pLmdldCgic291cmNlIiwgInVua25vd24iKQoKICAgICAgICAgICAgICAgICAgICBwcmludChmIlxueyfilIAnICogNTB9IikKICAgICAgICAgICAgICAgICAgICBwcmludChmIiAgU291cmNlOiB7c291cmNlfSIpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgIExvZzoge21lc3NhZ2VfdGV4dFs6MTIwXX0uLi4iKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYieyfilIAnICogNTB9IikKCiAgICAgICAgICAgICAgICAgICAgYW5hbHlzaXMgPSBhbmFseXplX3dpdGhfbGxtKG1zZykKICAgICAgICAgICAgICAgICAgICBwcmludChmIlxuICBBSSBBc3Nlc3NtZW50OlxuICB7YW5hbHlzaXN9XG4iKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgU3RvcmUgZm9yIGRhc2hib2FyZAogICAgICAgICAgICAgICAgICAgIGlvY3MgPSBleHRyYWN0X2lvY3MobWVzc2FnZV90ZXh0KQogICAgICAgICAgICAgICAgICAgIHZlcmRpY3RfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgInRpbWVzdGFtcCI6IGRhdGV0aW1lLm5vdygpLmlzb2Zvcm1hdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlIjogc291cmNlLAogICAgICAgICAgICAgICAgICAgICAgICAibG9nIjogbWVzc2FnZV90ZXh0WzoyMDBdLAogICAgICAgICAgICAgICAgICAgICAgICAiYW5hbHlzaXMiOiBhbmFseXNpcywKICAgICAgICAgICAgICAgICAgICAgICAgImlvY3MiOiBpb2NzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGFuYWx5c2lzX2hpc3RvcnkuYXBwZW5kbGVmdCh2ZXJkaWN0X2RhdGEpCgogICAgICAgICAgICAgICAgICAgICMgQXV0by1jcmVhdGUgVGhlSGl2ZSBhbGVydCBmb3IgSElHSC9DUklUSUNBTAogICAgICAgICAgICAgICAgICAgIGlmICJISUdIIiBpbiBhbmFseXNpcy51cHBlcigpIG9yICJDUklUSUNBTCIgaW4gYW5hbHlzaXMudXBwZXIoKToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiAg4pqg77iPICBFc2NhbGF0aW5nIHRvIFRoZUhpdmUuLi4iKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyBFbnJpY2htZW50IFN0ZXAgKE9UWCB2aWEgQ29ydGV4KQogICAgICAgICAgICAgICAgICAgICAgICBlbnJpY2htZW50X3JlcG9ydCA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZF90aHJlYXRzID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGlwIGluIGlvY3NbJ2lwJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBydW5fY29ydGV4X2FuYWx5emVyKCdpcCcsIGlwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJlczogcmVzID0gcXVlcnlfb3R4X2RpcmVjdCgnaXAnLCBpcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlczogZm91bmRfdGhyZWF0cy5hcHBlbmQoZiJJUDoge2lwfSAtIHtzdHIocmVzKVs6MzAwXX0uLi4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBkb21haW4gaW4gaW9jc1snZG9tYWluJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBydW5fY29ydGV4X2FuYWx5emVyKCdkb21haW4nLCBkb21haW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgcmVzOiByZXMgPSBxdWVyeV9vdHhfZGlyZWN0KCdkb21haW4nLCBkb21haW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByZXM6IGZvdW5kX3RocmVhdHMuYXBwZW5kKGYiRG9tYWluOiB7ZG9tYWlufSAtIHtzdHIocmVzKVs6MzAwXX0uLi4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZvdW5kX3RocmVhdHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnJpY2htZW50X3JlcG9ydCA9ICJcbiIuam9pbihbZiItIHt0fSIgZm9yIHQgaW4gZm91bmRfdGhyZWF0c10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIiAgWytdIEFkZGVkIHtsZW4oZm91bmRfdGhyZWF0cyl9IGVucmljaG1lbnQocykgZnJvbSBPVFguIikKCiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZV90aGVoaXZlX2FsZXJ0KG1zZywgYW5hbHlzaXMsIGVucmljaG1lbnRfcmVwb3J0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBObyBuZXcgbG9ncy4gU2xlZXBpbmcge1BPTExfSU5URVJWQUx9cy4uLiIpCgogICAgICAgICAgICAjIEtlZXAgc2Vlbl9pZHMgZnJvbSBncm93aW5nIGZvcmV2ZXIKICAgICAgICAgICAgaWYgbGVuKHNlZW5faWRzKSA+IDEwMDAwOgogICAgICAgICAgICAgICAgc2Vlbl9pZHMgPSBzZXQobGlzdChzZWVuX2lkcylbLTUwMDA6XSkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIltTT0MtQUldIEVycm9yIGluIG1haW4gbG9vcDoge2V9IikKCiAgICAgICAgdGltZS5zbGVlcChQT0xMX0lOVEVSVkFMKQoKCmRlZiBnZW5lcmF0ZV9wb3N0X2luY2lkZW50X3JlcG9ydChjYXNlX2RhdGEpOgogICAgIiIiR2VuZXJhdGUgYSBmb3JtYWwgcmVwb3J0IHVzaW5nIE9sbGFtYSBiYXNlZCBvbiBjYXNlIGRldGFpbHMuIiIiCiAgICB0cnk6CiAgICAgICAgdGl0bGUgPSBjYXNlX2RhdGEuZ2V0KCJ0aXRsZSIsICJVbmtub3duIEluY2lkZW50IikKICAgICAgICBkZXNjcmlwdGlvbiA9IGNhc2VfZGF0YS5nZXQoImRlc2NyaXB0aW9uIiwgIk5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIikKICAgICAgICAKICAgICAgICB1c2VyX3Byb21wdCA9IGYiQ2FzZSBUaXRsZToge3RpdGxlfVxuRGVzY3JpcHRpb246IHtkZXNjcmlwdGlvbn1cblN0YXR1czogUmVzb2x2ZWRcblxuUGxlYXNlIGdlbmVyYXRlIGEgY29tcHJlaGVuc2l2ZSBwb3N0LWluY2lkZW50IHJlcG9ydCBmb3IgdGhpcyBjYXNlLiIKICAgICAgICAKICAgICAgICByID0gcmVxdWVzdHMucG9zdCgKICAgICAgICAgICAgZiJ7T0xMQU1BX1VSTH0vYXBpL2NoYXQiLAogICAgICAgICAgICBqc29uPXsKICAgICAgICAgICAgICAgICJtb2RlbCI6IE9MTEFNQV9NT0RFTCwKICAgICAgICAgICAgICAgICJtZXNzYWdlcyI6IFsKICAgICAgICAgICAgICAgICAgICB7InJvbGUiOiAic3lzdGVtIiwgImNvbnRlbnQiOiBSRVBPUlRfU1lTVEVNX1BST01QVH0sCiAgICAgICAgICAgICAgICAgICAgeyJyb2xlIjogInVzZXIiLCAiY29udGVudCI6IHVzZXJfcHJvbXB0fSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAic3RyZWFtIjogRmFsc2UsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRpbWVvdXQ9MTgwLAogICAgICAgICkKICAgICAgICAKICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgcmV0dXJuIHIuanNvbigpLmdldCgibWVzc2FnZSIsIHt9KS5nZXQoImNvbnRlbnQiLCAiRmFpbGVkIHRvIGdlbmVyYXRlIHJlcG9ydCB0ZXh0LiIpCiAgICAgICAgcmV0dXJuIGYiTExNIEVycm9yOiB7ci5zdGF0dXNfY29kZX0iCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmV0dXJuIGYiUmVwb3J0IEdlbmVyYXRpb24gRXJyb3I6IHtlfSIKCgpkZWYgcG9sbF9jbG9zZWRfY2FzZXMoKToKICAgICIiIlBlcmlvZGljYWxseSBjaGVjayBUaGVIaXZlIGZvciBuZXdseSByZXNvbHZlZCBjYXNlcy4iIiIKICAgIGlmIG5vdCBUSEVISVZFX0FQSV9LRVk6CiAgICAgICAgcmV0dXJuCgogICAgcHJpbnQoIltTT0MtQUldIFN0YXJ0aW5nIGNsb3NlZC1jYXNlIHJlcG9ydGluZyBsb29wLi4uIikKICAgIHJlcG9ydGVkX2Nhc2VzID0gc2V0KCkKICAgIAogICAgd2hpbGUgVHJ1ZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtUSEVISVZFX0FQSV9LRVl9IiwKICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgIyAxLiBGZXRjaCBhbnkgcmVjZW50IGNhc2VzIHRvIHZlcmlmeSBjb25uZWN0aXZpdHkgYW5kIGZpbHRlciBtYW51YWxseQogICAgICAgICAgICAjIFNpbXBsaWZpZWQgcXVlcnkgdG8gYXZvaWQgdmVyc2lvbi1zcGVjaWZpYyBzb3J0IHN5bnRheCBlcnJvcnMKICAgICAgICAgICAgcXVlcnkgPSB7InF1ZXJ5Ijoge30sICJsaW1pdCI6IDUwfQogICAgICAgICAgICAKICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoZiJ7VEhFSElWRV9VUkx9L2FwaS9jYXNlL19zZWFyY2giLCBoZWFkZXJzPWhlYWRlcnMsIGpzb249cXVlcnksIHRpbWVvdXQ9MTApCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGNhc2VzID0gci5qc29uKCkKICAgICAgICAgICAgICAgIHJlc29sdmVkX3RoaXNfY3ljbGUgPSBbYyBmb3IgYyBpbiBjYXNlcyBpZiBjLmdldCgic3RhdHVzIiwgIiIpLmxvd2VyKCkgaW4gWyJyZXNvbHZlZCIsICJjbG9zZWQiXV0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgcmVzb2x2ZWRfdGhpc19jeWNsZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIltTT0MtQUldIENhc2UgUG9sbGVyOiBGb3VuZCB7bGVuKHJlc29sdmVkX3RoaXNfY3ljbGUpfSByZXNvbHZlZC9jbG9zZWQgY2FzZXMgb3V0IG9mIHtsZW4oY2FzZXMpfSByZWNlbnQgY2FzZXMuIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBMb2cgb25jZSBpbiBhIHdoaWxlIHNvIHRoZSB1c2VyIGtub3dzIGl0J3Mgd29ya2luZwogICAgICAgICAgICAgICAgICAgIHByaW50KGYiW1NPQy1BSV0gQ2FzZSBQb2xsZXI6IE5vIHJlc29sdmVkIGNhc2VzIGZvdW5kIGluIHRoZSBsYXN0IDIwIGNhc2VzLiAoVG90YWwgY2FzZXMgY2hlY2tlZDoge2xlbihjYXNlcyl9KSIpCgogICAgICAgICAgICAgICAgZm9yIGNhc2UgaW4gcmVzb2x2ZWRfdGhpc19jeWNsZToKICAgICAgICAgICAgICAgICAgICBjYXNlX2lkID0gY2FzZS5nZXQoImlkIikKICAgICAgICAgICAgICAgICAgICBpZiBjYXNlX2lkIGFuZCBjYXNlX2lkIG5vdCBpbiByZXBvcnRlZF9jYXNlczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBHZW5lcmF0aW5nIFBJUiBmb3IgY2FzZToge2Nhc2UuZ2V0KCd0aXRsZScpfSAoe2Nhc2VfaWR9KSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydF90ZXh0ID0gZ2VuZXJhdGVfcG9zdF9pbmNpZGVudF9yZXBvcnQoY2FzZSkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydF9kYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhc2VfaWQiOiBjYXNlX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRpdGxlIjogY2FzZS5nZXQoInRpdGxlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGltZXN0YW1wIjogZGF0ZXRpbWUubm93KCkuaXNvZm9ybWF0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicmVwb3J0IjogcmVwb3J0X3RleHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRfaGlzdG9yeS5hcHBlbmRsZWZ0KHJlcG9ydF9kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRlZF9jYXNlcy5hZGQoY2FzZV9pZCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYiW1NPQy1BSV0gQ2FzZSBQb2xsZXIgRXJyb3I6IFJlY2VpdmVkIHN0YXR1cyB7ci5zdGF0dXNfY29kZX0gZnJvbSBUaGVIaXZlLiBEZXRhaWxzOiB7ci50ZXh0WzoyMDBdfSIpCiAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiJbU09DLUFJXSBDYXNlIHBvbGxpbmcgZXhjZXB0aW9uOiB7ZX0iKQogICAgICAgICAgICAKICAgICAgICB0aW1lLnNsZWVwKFBPTExfSU5URVJWQUwgaWYgUE9MTF9JTlRFUlZBTCA+IDMwIGVsc2UgNjApICMgRG9uJ3Qgc3BhbSwgYnV0IHVzZSBjb25maWd1cmVkIGludGVydmFsCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgICMgU3RhcnQgQVBJIHRocmVhZAogICAgYXBpX3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXN0YXJ0X2FwaSwgZGFlbW9uPVRydWUpCiAgICBhcGlfdGhyZWFkLnN0YXJ0KCkKICAgIAogICAgIyBTdGFydCBDYXNlIFBvbGxpbmcgdGhyZWFkCiAgICBpZiBUSEVISVZFX0FQSV9LRVk6CiAgICAgICAgY2FzZV90aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1wb2xsX2Nsb3NlZF9jYXNlcywgZGFlbW9uPVRydWUpCiAgICAgICAgY2FzZV90aHJlYWQuc3RhcnQoKQogICAgCiAgICBtYWluKCkK",
    "soc-ai/requirements.txt": "cmVxdWVzdHM9PTIuMzEuMApmbGFzaz09My4wLjAKZmxhc2stY29ycz09NC4wLjAK",
    "thehive/application.conf": "IyMgVGhlSGl2ZSA0IENvbmZpZ3VyYXRpb24KCiMgU2VjcmV0IEtleSAocmVxdWlyZWQgZm9yIHByb2R1Y3Rpb24gbW9kZSkKcGxheS5odHRwLnNlY3JldC5rZXk9JHs/VEhFSElWRV9TRUNSRVR9CgojIEVsYXN0aWNTZWFyY2gKc2VhcmNoIHsKICBpbmRleCA9ICJ0aGVoaXZlIgogIHVyaSA9ICJodHRwOi8vZWxhc3RpY3NlYXJjaC1zb2M6OTIwMCIKfQoKIyBDYXNzYW5kcmEKZGIgewogIHByb3ZpZGVyOiBqYW51c2dyYXBoCiAgamFudXNncmFwaCB7CiAgICBzdG9yYWdlIHsKICAgICAgYmFja2VuZDogY3FsCiAgICAgIGhvc3RuYW1lOiBbImNhc3NhbmRyYSJdCiAgICAgIGNxbCB7CiAgICAgICAgY2x1c3Rlci1uYW1lOiB0aHAKICAgICAgICBrZXlzcGFjZTogdGhlaGl2ZQogICAgICAgIGxvY2FsLWRhdGFjZW50ZXI6IGRhdGFjZW50ZXIxCiAgICAgICAgcmVhZC1jb25zaXN0ZW5jeS1sZXZlbDogT05FCiAgICAgICAgd3JpdGUtY29uc2lzdGVuY3ktbGV2ZWw6IE9ORQogICAgICB9CiAgICB9CiAgfQp9CgojIFN0b3JhZ2UgKExvY2FsIEZTIGZvciBhdHRhY2htZW50cykKc3RvcmFnZSB7CiAgcHJvdmlkZXI6IGxvY2FsZnMKICBsb2NhbGZzLmRpcmVjdG9yeTogL29wdC90aHAvdGhlaGl2ZS9maWxlcwp9CgojIEhUVFAgQmluZGluZwpodHRwIHsKICBwb3J0ID0gOTAwMAp9CgojIENvcnRleCBJbnRlZ3JhdGlvbgojIEFmdGVyIGZpcnN0IENvcnRleCBsb2dpbiwgY3JlYXRlIGFuIEFQSSBrZXkgYW5kIHBhc3RlIGl0IGJlbG93CmNvcnRleCB7CiAgc2VydmVycyA9IFsKICAgIHsKICAgICAgbmFtZSA9ICJsb2NhbC1jb3J0ZXgiCiAgICAgIHVybCA9ICJodHRwOi8vY29ydGV4OjkwMDAiCiAgICAgIGF1dGggewogICAgICAgIHR5cGUgPSAiYmVhcmVyIgogICAgICAgIGtleSA9ICR7P0NPUlRFWF9BUElfS0VZfQogICAgICB9CiAgICB9CiAgXQp9Cg==",
}

COMPOSE_CMD = ['docker', 'compose']
GRAYLOG_URL = 'http://localhost:9000/api'

def unpack_files():
    target_dir = os.path.dirname(os.path.abspath(__file__))
    print(f"[+] Unpacking files to {target_dir}...")
    
    for path, b64content in FILES.items():
        full_path = os.path.join(target_dir, path)
        dir_name = os.path.dirname(full_path)
        if dir_name:
            os.makedirs(dir_name, exist_ok=True)
            
        with open(full_path, "wb") as f:
            f.write(base64.b64decode(b64content))
            
    print("[+] All files unpacked successfully.\n")

# ==========================================
# PART 2: ORCHESTRATE DEPLOYMENT
# ==========================================
def generate_random_string(length=32):
    return secrets.token_urlsafe(length)

def generate_sha256(password):
    return hashlib.sha256(password.encode()).hexdigest()

def check_dependencies():
    try:
        subprocess.run(['docker', '--version'], check=True, capture_output=True)
        subprocess.run(COMPOSE_CMD + ['version'], check=True, capture_output=True)
    except FileNotFoundError:
        print("[-] Docker is not installed or not in PATH.")
        exit(1)
    except subprocess.CalledProcessError:
        print("[-] Docker Daemon does not appear to be running.")
        exit(1)
    print("[+] Docker is installed and running.")

def setup_environment():
    if os.path.exists('.env'):
        print("[!] .env already exists. Skipping generation.")
        return

    print("[+] Generating secrets and creating .env file...")
    with open('.env.example', 'r') as f:
        env_content = f.read()

    graylog_secret = generate_random_string(64)
    graylog_sha = generate_sha256('admin')
    thehive_secret = generate_random_string(64)
    cortex_secret = generate_random_string(64)

    env_content = env_content.replace('Generate_At_Least_16_Chars_Random_String', graylog_secret)
    env_content = env_content.replace('REPLACE_WITH_SHA256_OF_YOUR_PASSWORD', graylog_sha)
    env_content = env_content.replace('Replace_With_A_Long_Random_String_1', thehive_secret)
    env_content = env_content.replace('Replace_With_A_Long_Random_String_2', cortex_secret)

    with open('.env', 'w') as f:
        f.write(env_content)
    
    print("[+] .env file created successfully.")

def manage_containers(action='up', service=None):
    """Spin up or stop docker containers."""
    print(f"[+] Running: docker compose {action} -d {service if service else ''}")
    cmd = COMPOSE_CMD + [action]
    if action == 'up':
        cmd.extend(['-d'])
        # Only build on first run (when service is None)
        if not service:
            cmd.append('--build')
    
    if service:
        cmd.append(service)
    
    subprocess.run(cmd, check=True)

def wait_for_services():
    services = {
        'Graylog': 'http://localhost:9000',
        'Cortex': 'http://localhost:9002',
        'TheHive': 'http://localhost:9001'
    }

    print("[+] Waiting for services to come online (this may take a few minutes)...")
    for name, url in services.items():
        ready = False
        while not ready:
            try:
                response = requests.get(url, timeout=2)
                if response.status_code < 500:
                    print(f"  -> {name} is UP!")
                    ready = True
            except requests.ConnectionError:
                pass
            
            if not ready:
                time.sleep(5)

def configure_graylog():
    print("[+] Configuring Graylog Syslog UDP Input...")
    url = f"{GRAYLOG_URL}/system/inputs"
    payload = {
        "title": "Syslog UDP",
        "type": "org.graylog2.inputs.syslog.udp.SyslogUDPInput",
        "configuration": {
            "port": 1514,
            "bind_address": "0.0.0.0"
        },
        "global": True
    }
    
    try:
        response = requests.post(url, json=payload, auth=('admin', 'admin'), headers={'X-Requested-By': 'python-setup'})
        if response.status_code == 201:
            print("[+] Graylog input created successfully.")
        elif response.status_code == 400 and 'already exists' in response.text:
            print("[!] Graylog input already exists.")
        else:
            print(f"[-] Failed to create Graylog input: {response.text}")
    except Exception as e:
        print(f"[-] Graylog API Error: {e}")

def main():
    print("=== SOC-Lab Unified Installer ===")
    print("This script will extract the file architecture and instantly deploy the stack.\n")
    
    # PART 1
    unpack_files()
    
    # PART 2
    check_dependencies()
    setup_environment()
    manage_containers()
    wait_for_services()
    configure_graylog()
    
    print("\n" + "="*50)
    print("Deployment Complete!")
    print("All necessary files have been unpacked to the current directory.")
    print("Graylog is fully setup and containers are running.")
    print("Because Cortex and TheHive initial Admin setups require manual DB initializations,")
    print("you still need to generate their API keys from their respective Web UIs.")
    print("\n[TIP] To avoid recreating all containers (like TheHive) when updating keys:")
    print("1. For Cortex/TheHive integration: 'docker compose up -d thehive'")
    print("2. For SOC-AI API Key: 'docker compose up -d --build soc-ai'")
    print("="*50)

if __name__ == "__main__":
    main()
